<html>
<head>
<title>AI on Thanos Tweets, Emotion Detector using torchMoji</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">äººå·¥æ™ºèƒ½åœ¨ç­éœ¸æ¨ç‰¹ä¸Šï¼Œä½¿ç”¨ç«ç‚¬ç çš„æƒ…ç»ªæ£€æµ‹å™¨</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://pub.towardsai.net/ai-on-thanos-tweets-emotion-detector-using-torchmoji-eda6026625be?source=collection_archive---------1-----------------------#2020-06-24">https://pub.towardsai.net/ai-on-thanos-tweets-emotion-detector-using-torchmoji-eda6026625be?source=collection_archive---------1-----------------------#2020-06-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="11d0" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsai.net/p/category/nlp" rel="noopener ugc nofollow" target="_blank">è‡ªç„¶è¯­è¨€å¤„ç†</a></h2><div class=""/><div class=""><h2 id="25ef" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">åœ¨NLPä¸Šä½¿ç”¨æ·±åº¦å­¦ä¹ ã€‚<a class="ae kr" href="https://github.com/arditoibryan/Projects/tree/master/20200621_Thanos_Emotion_Detection" rel="noopener ugc nofollow" target="_blank">å®Œæ•´ä»£ç å¯åœ¨æˆ‘çš„Githubå›è´­ã€‚</a></h2></div><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ks"><img src="../Images/9a67800c76a1e50174975222eea9e778.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HeB1kylmWsMMKVXO7c_xVQ.png"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">ç­éœ¸å¤§æˆ˜å¤ä»‡è€…è”ç›Ÿï¼Œæ— é™æˆ˜äº‰ï¼Œ2018</figcaption></figure><p id="a3a4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae kr" href="https://medium.com/towards-artificial-intelligence/using-torchmoji-with-python-and-deep-learning-3fefee62c9a1" rel="noopener">åœ¨æˆ‘çš„ä¸Šä¸€ç¯‡æ•™ç¨‹</a>ä¸­ï¼Œæˆ‘ç»ˆäºèƒ½å¤Ÿå‘å¸ƒä»£ç ï¼Œåœ¨ä½ çš„pythonä»£ç ä¸­ä½¿ç”¨torch moji(deep mojiçš„PyTorchç‰ˆæœ¬)ã€‚æ‰€æœ‰æ¥è¿‘NLPçš„äººå·¥æ™ºèƒ½å¼€å‘äººå‘˜éƒ½å¸Œæœ›ä»å¯¹ä¸€äº›æ–‡æœ¬è¿›è¡Œæƒ…æ„Ÿåˆ†æå¼€å§‹ã€‚</p><p id="b878" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç„¶è€Œï¼Œæƒ…æ„Ÿåˆ†ææœ‰å¾ˆå¤§çš„å±€é™æ€§ã€‚æƒ…æ„Ÿåˆ†æçš„è¾“å‡ºèŒƒå›´ä»-1åˆ°1ï¼Œä¸€ä¸ªå•ä¸€çš„ç»´åº¦ã€‚ä½ å¯ä»¥åœ¨ä¸€ç»´è¾“å‡ºä¸­æ‰¾åˆ°çš„é›†ç¾¤æ˜¯é€šè¿‡æ’åºä¸€ä¸ªåˆ—è¡¨å¾—åˆ°çš„ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ²¡ä»€ä¹ˆç‰¹åˆ«çš„ã€‚</p><h2 id="c07f" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">ä¸ºä»€ä¹ˆæˆ‘è¦ä½¿ç”¨æƒ…ç»ªæ£€æµ‹ï¼Ÿ</h2><p id="8d54" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">DeepMojiå·²ç»åœ¨1.246.000æ¡ç¤¾äº¤åª’ä½“æ–‡æœ¬ä¸Šè¿›è¡Œäº†è®­ç»ƒï¼Œä»¥è¯†åˆ«ä½•æ—¶ä½¿ç”¨äº†64ç§ä¸åŒçš„æƒ…ç»ªã€‚è¾“å‡ºä¸æ˜¯å•ä¸€ç»´åº¦ï¼Œè€Œæ˜¯64ä¸ªç»´åº¦(64åˆ—)ã€‚æˆ‘å¯ä»¥æ‰§è¡Œæ›´æ·±å…¥çš„åˆ†æï¼Œç”šè‡³åœ¨æ•°æ®ä¸­æ‰¾åˆ°èšç±»ï¼Œè¿™å¢åŠ äº†æˆ‘ç®¡ç†NLPé—®é¢˜çš„å¤æ‚æ€§ã€‚</p><h1 id="1ed8" class="nb mf it bd mg nc nd ne mj nf ng nh mm ki ni kj mp kl nj km ms ko nk kp mv nl bi translated">ä¸‹è½½æ¨æ–‡</h1><p id="e3c7" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">è¦ä¸‹è½½æˆåƒä¸Šä¸‡æ¡æ¨æ–‡ï¼Œä½ å¯ä»¥ä½¿ç”¨åŸå§‹çš„Twitter APIï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨twintã€‚å› ä¸ºä½¿ç”¨è¿™ä¸ªå·¥å…·è¿åäº†Twitterçš„æœåŠ¡æ¡æ¬¾ï¼Œæ‰€ä»¥è¦æ˜æ™ºã€‚æˆ‘ä¸ä¼šåœ¨å­¦æœ¯å‡ºç‰ˆç‰©ä¸­ä½¿ç”¨è¿™äº›æ•°æ®ï¼Œå¹¶ä¸”ï¼Œåœ¨æˆ‘çš„å­˜å‚¨åº“ä¸­ï¼Œæˆ‘å°†åªä¿å­˜é‚£äº›ä¸ä¼šå‘æ‚¨æ˜¾ç¤ºå‘å¸ƒè¡¥é—´è€…çš„ç”¨æˆ·ä¿¡æ¯çš„æ•°æ®é›†éƒ¨åˆ†ã€‚</p><pre class="kt ku kv kw gt nm nn no np aw nq bi"><span id="1dc2" class="me mf it nn b gy nr ns l nt nu">!pip3 install twint</span><span id="5d6c" class="me mf it nn b gy nv ns l nt nu"><a class="ae kr" href="https://github.com/twintproject/twint" rel="noopener ugc nofollow" target="_blank">https://github.com/twintproject/twint</a></span><span id="c05d" class="me mf it nn b gy nv ns l nt nu">import twint</span><span id="fc7a" class="me mf it nn b gy nv ns l nt nu"># Configure<br/>c = twint.Config()<br/>c.Search = '#thanos', 'Thanos'<br/>#c.Search = 'Thanos', 'snap'<br/>c.Store_csv = True<br/>c.Since = "2018-06-16 00:00:00" #anno, mese, giorno<br/>#c.g="48.880048,2.385939,1km" #1km radius from Paris<br/>c.Limit = 10000 #non funziona<br/>c.Output = "Thanos.csv"</span></pre><p id="be12" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æœ‰äº†è¿™äº›è®¾ç½®ï¼Œå½“æˆ‘è¿è¡Œä¸‹é¢çš„ä»£ç æ—¶ï¼Œè½¯ä»¶å°†ä¸‹è½½å®ƒåœ¨ç½‘ä¸Šæ‰¾åˆ°çš„æ‰€æœ‰æ¨æ–‡ã€‚æˆ‘åªå¯¹æ¨æ–‡æ„Ÿå…´è¶£ï¼Œæ‰€ä»¥æˆ‘ä¼šæ”¾å¼ƒæ‰€æœ‰å…¶ä»–ä¿¡æ¯ã€‚</p><pre class="kt ku kv kw gt nm nn no np aw nq bi"><span id="3b14" class="me mf it nn b gy nr ns l nt nu"># Run<br/>twint.run.Search(c)</span></pre><p id="c5b3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç»è¿‡10åˆ†é’Ÿçš„ç­‰å¾…æ—¶é—´ï¼Œæˆ‘å·²ç»èƒ½å¤Ÿå­˜å‚¨5kæ¡æ¨æ–‡è¿›è¡Œåˆ†æã€‚çš„ã€‚csvæ–‡ä»¶å·²è‡ªåŠ¨å­˜å‚¨åœ¨æˆ‘çš„æ–‡ä»¶ä¸­ï¼Œå› æ­¤æˆ‘å¯ä»¥åœ¨ä»¥åæ£€ç´¢å®ƒã€‚</p><h1 id="e136" class="nb mf it bd mg nc nd ne mj nf ng nh mm ki ni kj mp kl nj km ms ko nk kp mv nl bi translated">æ­£åœ¨å®‰è£…DeepMoji</h1><p id="72f0" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">ä¸å¹¸çš„æ˜¯ï¼Œå®‰è£…éœ€è¦å‡ åˆ†é’Ÿï¼Œå¹¶ä¸”éœ€è¦ä¸‹è½½å¤§é‡æ•°æ®ã€‚</p><pre class="kt ku kv kw gt nm nn no np aw nq bi"><span id="e935" class="me mf it nn b gy nr ns l nt nu">#Install torchMoji<br/>!pip3 install torch==1.0.1 -f <a class="ae kr" href="https://download.pytorch.org/whl/cpu/stable" rel="noopener ugc nofollow" target="_blank">https://download.pytorch.org/whl/cpu/stable</a> <br/>!git clone <a class="ae kr" href="https://github.com/huggingface/torchMoji" rel="noopener ugc nofollow" target="_blank">https://github.com/huggingface/torchMoji</a><br/>import os<br/>os.chdir('torchMoji')<br/>!pip3 install -e .</span></pre><p id="f0c2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è¯·æ³¨æ„ï¼Œè½¯ä»¶ç°åœ¨ä¼šè¦æ±‚æ‚¨é‡æ–°å¯åŠ¨ç¬”è®°æœ¬ç”µè„‘ï¼Œä½†æ˜¯ï¼Œå¦‚æœæ‚¨è¿™æ ·åšäº†ï¼Œç¬”è®°æœ¬ç”µè„‘æœ‰å¯èƒ½ä¼šåœ¨å¾ªç¯ä¸­å´©æºƒã€‚å¦‚æœä½ è®¾æ³•å¥½å¥‡ï¼Œä½¿å®ƒå¡ä½äº†ï¼Œå°å¿ƒé‡ç½®æ‰€æœ‰è®¾ç½®ï¼Œä»¥é˜²æ­¢å´©æºƒå¾ªç¯ã€‚</p><pre class="kt ku kv kw gt nm nn no np aw nq bi"><span id="00ad" class="me mf it nn b gy nr ns l nt nu">!python3 scripts/download_weights.py</span></pre><p id="77b4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è¦å®Œæˆç¬¬äºŒéƒ¨åˆ†ï¼Œæ‚¨å¿…é¡»æˆæƒä¸‹è½½ã€‚</p><pre class="kt ku kv kw gt nm nn no np aw nq bi"><span id="d97e" class="me mf it nn b gy nr ns l nt nu">import numpy as np<br/>import emoji, json<br/>from torchmoji.global_variables import PRETRAINED_PATH, VOCAB_PATH<br/>from torchmoji.sentence_tokenizer import SentenceTokenizer<br/>from torchmoji.model_def import torchmoji_emojis<br/>  <br/>EMOJIS = ":joy: :unamused: :weary: :sob: :heart_eyes: :pensive: :ok_hand: :blush: :heart: :smirk: :grin: :notes: :flushed: :100: :sleeping: :relieved: :relaxed: :raised_hands: :two_hearts: :expressionless: :sweat_smile: :pray: :confused: :kissing_heart: :heartbeat: :neutral_face: :information_desk_person: :disappointed: :see_no_evil: :tired_face: :v: :sunglasses: :rage: :thumbsup: :cry: :sleepy: :yum: :triumph: :hand: :mask: :clap: :eyes: :gun: :persevere: :smiling_imp: :sweat: :broken_heart: :yellow_heart: :musical_note: :speak_no_evil: :wink: :skull: :confounded: :smile: :stuck_out_tongue_winking_eye: :angry: :no_good: :muscle: :facepunch: :purple_heart: :sparkling_heart: :blue_heart: :grimacing: :sparkles:".split(' ')<br/>model = torchmoji_emojis(PRETRAINED_PATH)<br/>with open(VOCAB_PATH, 'r') as f:<br/>  vocabulary = json.load(f)<br/>st = SentenceTokenizer(vocabulary, 30)</span></pre><p id="a672" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">åˆ›å»ºè§£ç å‡½æ•°ã€‚è™½ç„¶è¿™ä¸ªå‡½æ•°åœ¨æºä»£ç ä¸­å·²ç»å¯ç”¨ï¼Œä½†æˆ‘æ·»åŠ äº†ä¸€äº›ç®€å•çš„ä¿®æ”¹ï¼Œè®©ä½ å¯ä»¥è®¿é—®æƒ…ç»ªæ£€æµ‹çš„æ¦‚ç‡åˆ†å¸ƒï¼Œè¿™æ ·ä½ å°±çŸ¥é“ä»æ–‡æœ¬ä¸­ä¼°è®¡çš„æ¯ä¸ªè¡¨æƒ…ç¬¦å·çš„æ¦‚ç‡æ˜¯å¤šå°‘ã€‚å½“æˆ‘å¿…é¡»æ‰§è¡Œæ›´å¤æ‚çš„åˆ†æ(å¦‚èšç±»)æ—¶ï¼Œè¿™äº›æ•°æ®å°†è¢«è¯æ˜æ˜¯æœ‰ç”¨çš„ã€‚</p><pre class="kt ku kv kw gt nm nn no np aw nq bi"><span id="8393" class="me mf it nn b gy nr ns l nt nu">def deepmojify(sentence, top_n=5, return_emoji=True, return_prob=False):<br/>  #converte lista probabilitÃ  in emoticon piÃ¹ probabili<br/>  def top_elements(array, k):<br/>    ind = np.argpartition(array, -k)[-k:]<br/>    return ind[np.argsort(array[ind])][::-1]</span><span id="0cba" class="me mf it nn b gy nv ns l nt nu">tokenized, _, _ = st.tokenize_sentences([sentence])<br/>  #print(tokenized)<br/>  #lista di probabilitÃ <br/>  prob = model(tokenized)[0]<br/>  #se ci sono errori parte da qui: too many values to unpack (expected 2), non riesce a trovare prob<br/>  #trova le n emoticono piÃ¹ alte <br/>  emoji_ids = top_elements(prob, top_n)</span><span id="971d" class="me mf it nn b gy nv ns l nt nu">#converte questi numeri in emoticons<br/>  emojis = map(lambda x: EMOJIS[x], emoji_ids)<br/>  <br/>  if return_emoji == False and return_prob == False:<br/>    return None<br/>  elif return_emoji == True and return_prob == False:<br/>    return emoji.emojize(f"{sentence} {' '.join(emojis)}", use_aliases=True)<br/>  elif return_emoji == True and return_prob == True:<br/>    return emoji.emojize(f"{sentence} {' '.join(emojis)}", use_aliases=True), prob<br/>  elif return_emoji == False and return_prob == True:<br/>    return prob</span></pre><h2 id="dba9" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">å°†å•ä¸ªæ–‡æœ¬è½¬æ¢ä¸ºè¡¨æƒ…ç¬¦å·</h2><pre class="kt ku kv kw gt nm nn no np aw nq bi"><span id="d93e" class="me mf it nn b gy nr ns l nt nu">deepmojify('ciao come stai?', top_n=3, return_emoji=True, return_prob=False)<br/>'ciao come stai? ğŸ’“ ğŸ’› â¤'</span></pre><p id="67c9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è¿™æ®µä»£ç å°†ç®€å•åœ°è¿”å›è¿™å¥è¯ä¸­æœ€å¯èƒ½çš„è¡¨æƒ…ç¬¦å·ã€‚æˆ‘å°†åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ä½¿ç”¨è¿™æ®µä»£ç æ¥æ›´é«˜çº§åœ°ä½¿ç”¨æ•°æ®åˆ†æå·¥å…·ã€‚</p><pre class="kt ku kv kw gt nm nn no np aw nq bi"><span id="155f" class="me mf it nn b gy nr ns l nt nu">deepmojify('ciao come stai?', top_n=3, return_emoji=False, return_prob=True)<br/>array([<br/>0.00394054, 0.00129295, 0.00197147, 0.00432513, 0.01371501,        0.00560058, 0.00418637, 0.02010225, 0.07735906, 0.01391253,        0.01317994, 0.00444024, 0.0065301 , 0.0008908 , 0.0036633 ,        0.00902654, 0.03026676, 0.00181301, 0.03949212, 0.00103115,        0.00485938, 0.00700757, 0.00463908, 0.02274275, 0.17968854,        0.00277099, 0.00447128, 0.00739905, 0.02860775, 0.00278266,        0.03876906, 0.0063387 , 0.00113546, 0.00621301, 0.00847516,        0.00747591, 0.01020002, 0.00090959, 0.00828929, 0.00162419,        0.00219347, 0.0071467 , 0.00454975, 0.0043973 , 0.00239056,        0.00502038, 0.00712393, 0.13541125, 0.00248322, 0.02106217,        0.02085136, 0.00176592, 0.00304266, 0.02627314, 0.01630236,        0.00183573, 0.00255118, 0.00402961, 0.00483469, 0.02000473,        0.02692209, 0.02151149, 0.00628529, 0.04087168<br/>], dtype=float32)</span></pre><p id="d144" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç›¸åï¼Œå¦‚æœä½ å¯¹DeepMojièƒŒåå‘ç”Ÿçš„è¿‡ç¨‹æ„Ÿå…´è¶£ï¼Œé€šè¿‡è¿™äº›å‚æ•°ï¼Œä½ å¯ä»¥è·å¾—è¿™å¥è¯çš„æ¦‚ç‡åˆ†å¸ƒã€‚</p><h2 id="e13e" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">é”™è¯¯:è¦è§£åŒ…çš„å€¼å¤ªå¤š(åº”ä¸º2)</h2><p id="16bc" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">å®ƒå¯èƒ½æ— ç¼˜æ— æ•…åœ°å‘ç”Ÿã€‚å¦‚æœä»£ç è¿è¡Œæ­¤é”™è¯¯ï¼Œé‡ç½®å˜é‡å¹¶ä»é›¶å¼€å§‹é‡æ–°å¯åŠ¨ã€‚æˆ‘æŠŠå®ƒæ”¾åœ¨æ–‡ç« é‡Œæ˜¯ä¸ºäº†é¿å…ä½ æ„Ÿåˆ°æ²®ä¸§ã€‚</p><h2 id="39e9" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">å°†åˆ—è¡¨è½¬æ¢ä¸ºDataFrame +è¡¨æƒ…ç¬¦å·</h2><p id="ade8" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">tweetæ•°æ®é›†è¢«å­˜å‚¨ä¸ºç†ŠçŒ«æ•°æ®å¸§ã€‚ç„¶è€Œï¼Œå‰é¢çš„å‡½æ•°å°†å•ä¸ªæ–‡æœ¬ä½œä¸ºè¾“å…¥ã€‚è¯¥å‡½æ•°å°†åˆ—è¡¨ä½œä¸ºè¾“å…¥ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæ•°æ®å¸§ï¼Œåœ¨ä¸‹é¢çš„åˆ—ä¸­å­˜å‚¨æŒ‡å®šæ•°é‡çš„è¡¨æƒ…ç¬¦å·ã€‚</p><pre class="kt ku kv kw gt nm nn no np aw nq bi"><span id="dff6" class="me mf it nn b gy nr ns l nt nu">import pandas as pd</span><span id="2c75" class="me mf it nn b gy nv ns l nt nu">#converts a list to emoji<br/>def emoji_dataset(list1, n_emoji=3, only_prob=False):<br/>  emoji_list = [[x] for x in list1]</span><span id="5537" class="me mf it nn b gy nv ns l nt nu">for _ in range(len(list1)):<br/>    for n_emo in range(1, n_emoji+1):<br/>      if only_prob == False:<br/>        emoji_list[_].append(deepmojify(list1[_], top_n=n_emoji, return_emoji=True, return_prob=False)[2*-n_emo+1])<br/>      else:<br/>        emoji_list[_].append(deepmojify(list1[_], top_n=1, return_emoji=False, return_prob=True))</span><span id="fc1c" class="me mf it nn b gy nv ns l nt nu">emoji_list = pd.DataFrame(emoji_list)<br/>  return emoji_list</span></pre><h1 id="a413" class="nb mf it bd mg nc nd ne mj nf ng nh mm ki ni kj mp kl nj km ms ko nk kp mv nl bi translated">å¤„ç†æ¨ç‰¹æ•°æ®é›†</h1><h2 id="2d75" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">æ¸…ç†æ•°æ®</h2><p id="9897" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">æœ€åï¼Œæˆ‘å¯ä»¥æ”¶é›†5kæ¡æ¨æ–‡ã€‚åœ¨å°†å®ƒä»¬è¾“å…¥emoji_datasetåŠŸèƒ½ä¹‹å‰ï¼Œæˆ‘ä¼šä»”ç»†æ£€æŸ¥ï¼Œè‡³å°‘ï¼Œè¿™äº›æ¨æ–‡åŒ…å«å…³é”®è¯â€œç­éœ¸â€ã€‚</p><p id="2c20" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">* * *æˆ‘è®¤ä¸ºæœ‰æ›´å¥½çš„æ–¹æ³•æ¥ä»æ— æ•ˆçš„æ¨æ–‡ä¸­é€‰æ‹©æœ‰æ•ˆçš„ï¼Œä½†æ˜¯æˆ‘è¿˜æ²¡æœ‰æ¢ç´¢å®ƒä»¬ã€‚Twintå¹¶ä¸æ€»æ˜¯å®Œç¾çš„ï¼Œå®ƒå¯èƒ½ä¼šä¸‹è½½ä¸ç›¸å…³çš„æ¨æ–‡ã€‚</p><pre class="kt ku kv kw gt nm nn no np aw nq bi"><span id="3394" class="me mf it nn b gy nr ns l nt nu">##Emotional Detector<br/>df = pd.read_csv('/content/drive/My Drive/Colab Notebooks/Projects/20200621_Emotion_Detector/Thanos.csv')<br/>df = pd.DataFrame(df['tweet'])<br/>df</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/8fa7e7990564610a77a912f4f71dad67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/1*sEtYHuH1KoG0ayPpN2vo_w.png"/></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">tweetsæ•°æ®é›†çš„ç¤ºä¾‹</figcaption></figure><pre class="kt ku kv kw gt nm nn no np aw nq bi"><span id="7697" class="me mf it nn b gy nr ns l nt nu">def check_string(string1):<br/>  if '#thanos' in string1:<br/>    return 1<br/>  elif 'Thanos' in string1:<br/>    return 1<br/>  elif 'thanos' in string1:<br/>    return 1<br/>  elif 'THANOS' in string1:<br/>    return 1<br/>  else:<br/>    return 0</span><span id="9307" class="me mf it nn b gy nv ns l nt nu">#cleaning the data<br/>df['healthy'] = 0<br/>df</span></pre><p id="8cbf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆ‘å°†åº”ç”¨è¯¥ç®—æ³•åˆ›å»ºå¦ä¸€ä¸ªåˆ—ã€‚å¯¹äºä¸åŒ…å«å‡½æ•°ä¸­æŒ‡å®šçš„å…³é”®å­—çš„æ‰€æœ‰tweetsï¼Œè¯¥åˆ—å°†æ˜¾ç¤º0å€¼ã€‚</p><pre class="kt ku kv kw gt nm nn no np aw nq bi"><span id="a5fe" class="me mf it nn b gy nr ns l nt nu">#only conserve tweets with the right keywords<br/>df['healthy'] = df['tweet'].apply(lambda x : check_string(x))<br/>df</span></pre><p id="e9c8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆ‘å°†åªé€‰æ‹©å¥åº·å€¼ä¸º0çš„åˆ—ã€‚</p><pre class="kt ku kv kw gt nm nn no np aw nq bi"><span id="8c95" class="me mf it nn b gy nr ns l nt nu">df = df.loc[df['healthy'] == 1]<br/>df</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/a1291f484439e58809c102824788a266.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*19T_9M1WdDoXXSrkR4vyjQ.png"/></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">æ•°æ®é›†çš„æ ·æœ¬</figcaption></figure><h2 id="0df5" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">è½¬æ¢æˆè¡¨æƒ…ç¬¦å·</h2><p id="ef5a" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">ç°åœ¨æ˜¯æ—¶å€™å°†æ•´ä¸ªæ•°æ®é›†è½¬æ¢æˆè¡¨æƒ…ç¬¦å·äº†ã€‚æˆ‘é€‰æ‹©5ä½œä¸ºç¥ç»ç½‘ç»œæœ€æœ‰å¯èƒ½åšå‡ºçš„é€‰æ‹©ã€‚å¯¹äºæ¯ä¸€å¥è¯ï¼Œç¥ç»ç½‘ç»œå°†ä¼°è®¡æœ€å¯èƒ½çš„5ä¸ªè¡¨æƒ…ç¬¦å·ã€‚</p><pre class="kt ku kv kw gt nm nn no np aw nq bi"><span id="fbf6" class="me mf it nn b gy nr ns l nt nu">df = df['tweet'].to_list()<br/>df</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ny"><img src="../Images/0fd6840278b8e3ba31be200d0f3c1804.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EQYjwZno-3k9Gk8XH7x6sQ.png"/></div></div></figure><p id="0ffd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è¯·è®°ä½ï¼Œè¯¥ç®—æ³•åªæ¥å—åˆ—è¡¨ã€‚ç°åœ¨æˆ‘å·²ç»æœ‰äº†æ­£ç¡®æ ¼å¼çš„æ•°æ®é›†ï¼Œå¯ä»¥å°†å®ƒè¾“å…¥åˆ°æ¨¡å‹ä¸­äº†ã€‚</p><pre class="kt ku kv kw gt nm nn no np aw nq bi"><span id="a9d8" class="me mf it nn b gy nr ns l nt nu">#start converting text to emoji<br/>df = emoji_dataset(df, 5)<br/>df</span></pre><p id="3304" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç­‰å¾…æ—¶é—´å¤§çº¦æ˜¯30åˆ†é’Ÿã€‚å¯¹æ­¤æˆ‘å¾ˆæŠ±æ­‰ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰è€å¿ƒã€‚</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi nz"><img src="../Images/4acd2f13a7ea889ea2135c8b4dad8fb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZsWl2704TKvbLhBTOe2vsQ.png"/></div></div></figure><p id="e073" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¤ªæ£’äº†ã€‚æˆ‘ä»¬çš„æ•°æ®é›†å·²ç»è¢«è½¬æ¢æˆè¡¨æƒ…ç¬¦å·ã€‚æˆ‘å°†åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­è®¨è®ºå¦‚ä½•åˆ†ææ•°æ®æ¥æ‰¾å‡ºèšç±»åœ¨å“ªé‡Œã€‚</p><h2 id="fe36" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">å¯¼å‡ºæ•°æ®é›†</h2><p id="ed08" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">å¦‚æœä½ æƒ³åœ¨ä½ çš„ç”µè„‘ä¸Šå¯¼å‡ºç»“æœï¼Œè¿™æ˜¯ä»£ç ã€‚</p><pre class="kt ku kv kw gt nm nn no np aw nq bi"><span id="41c8" class="me mf it nn b gy nr ns l nt nu">#export dataset<br/>df.to_csv('Thanos_.csv')</span></pre><p id="a716" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¦‚æœä½ å–œæ¬¢ï¼Œè¯·éšæ„é¼“æŒã€‚æ„Ÿè°¢æ‚¨çš„é˜…è¯»ã€‚</p></div></div>    
</body>
</html>