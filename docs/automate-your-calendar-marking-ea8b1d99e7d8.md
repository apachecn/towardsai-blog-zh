# ä½¿ç”¨ python è‡ªåŠ¨æ ‡è®°æ—¥å†

> åŸæ–‡ï¼š<https://pub.towardsai.net/automate-your-calendar-marking-ea8b1d99e7d8?source=collection_archive---------2----------------------->

## [ç¼–ç¨‹](https://towardsai.net/p/category/programming)

## å¦‚ä½•ä½¿ç”¨ python æ¨¡å— July åˆ›å»ºè‡ªå®šä¹‰æ—¥å†

![](img/b627f20affccac0a57a3dfbb77d33993.png)

[Towfiqu barbhuiya](https://unsplash.com/@towfiqu999999?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) åœ¨ [Unsplash](https://unsplash.com/s/photos/calendar?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹ç…§

# **ç®€ä»‹**

å¼€å§‹æ–°çš„ä¸€å¹´ï¼Œæˆ‘ä»¬æ€»æ˜¯ä¼šæƒ³å‡ºæ–°çš„å†³å¿ƒã€å‡æœŸè®¡åˆ’æˆ–ä»»ä½•å¯èƒ½åˆ°æ¥çš„é‡è¦äº‹ä»¶ã€‚æˆ‘ä»¬åœ¨æ—¥å†ä¸Šæ ‡å‡ºæ‰€æœ‰ç‰¹æ®Šçš„æ—¥å­æ¥æé†’æˆ‘ä»¬è¿™äº›äº‹æƒ…ã€‚ä¸€äº›äººåœ¨åº”ç”¨ç¨‹åºä¸­æ ‡è®°ä»–ä»¬çš„æ—¥å†ï¼Œæˆ–è€…ä¸€äº›äººä»ç„¶æŠŠä»–ä»¬çš„ç‰©ç†æ—¥å†æ”¾åœ¨æ¡Œå­ä¸Šï¼Œä¸ºäº†æ›´å¥½çš„è§†è§‰æ•ˆæœè€Œå…¬å¼€æ ‡è®°ã€‚æˆ‘ä»¬æ‰¾åˆ°çš„æ—¥å†åœ¨å‘¨æœ«å’Œä¸€èˆ¬å…¬å…±å‡æ—¥å¯èƒ½ä¼šæœ‰ä¸åŒçš„é¢œè‰²ï¼Œè¿™å–å†³äºä½ æ‰€åœ¨çš„å›½å®¶æˆ–å·ã€‚

# **ä¸ºä»€ä¹ˆè¦å®šåˆ¶ï¼Ÿ**

å°±æˆ‘è€Œè¨€ï¼Œæˆ‘æ‰€åœ¨çš„å›½å®¶çš„å…¬å…±å‡æœŸæ˜¯ç”±å„å·å†³å®šçš„ã€‚å¦‚æœæˆ‘èƒ½å¾—åˆ°ä¸€æœ¬æ ‡æœ‰ PH å€¼çš„ç‰©ç†æ—¥å†å°±å¥½äº†ã€‚åœ¨å·¥ä½œåœºæ‰€ï¼Œæˆ‘ä»¬ä¹Ÿå€¾å‘äºæœ‰ä¸€ä¸ªé‡è¦äº‹ä»¶çš„â€œé¢å¤–â€æ—¥å†ï¼Œä¾‹å¦‚ï¼Œé¡¹ç›®ç›¸å…³çš„ï¼Œå…¬å¸äº‹ä»¶ï¼Œç”šè‡³æˆ‘ä»¬åŒäº‹çš„ç”Ÿæ—¥åˆ—è¡¨ã€‚ä½¿ç”¨ python æ¨¡å— Julyï¼Œæˆ‘ä»¬å¯ä»¥è‡ªåŠ¨æ ‡è®°å‡†å¤‡æ‰“å°çš„è‡ªå®šä¹‰æ—¥å†ï¼Œä»¥æ ‡è®°ç‰¹å®šå¹´ä»½åˆ—å‡ºçš„ä»»ä½•é‡è¦æ—¥æœŸã€‚

# **å…ˆå†³æ¡ä»¶**

å¦‚æœä½ æƒ³ç”Ÿæˆè‡ªå·±å®šåˆ¶çš„æ—¥å†ï¼Œé¦–å…ˆä½ éœ€è¦çš„æ˜¯é‡è¦æ—¥æœŸçš„åˆ—è¡¨ã€‚æˆ‘æ­£åœ¨ä½¿ç”¨æˆ‘çš„å›½å®¶(å·)çš„å…¬å…±å‡æ—¥åˆ—è¡¨è¿›è¡Œä½¿ç”¨ Jupyter ç¬”è®°æœ¬çš„æ¼”ç¤ºã€‚ä½ å¯ä»¥åœ¨æˆ‘çš„ [github](https://github.com/yudhi-chen/custom_calendar) ä¸Šæ‰¾åˆ°ä»£ç ç»†èŠ‚ï¼Œä»¥åŠä¸€ä¸ª CSV æ ¼å¼çš„å…¬å…±å‡æ—¥åˆ—è¡¨æ ·æœ¬ã€‚

![](img/0f8c6184462f601745a0193d0ec1d6e1.png)

å…¬å…±å‡æ—¥åˆ—è¡¨|ä½œè€…å›¾ç‰‡

# **ç¬¬ä¸€æ­¥:å®‰è£…åŒ…â†’å¯¼å…¥â†’è¯»å–æ•°æ®**

æˆ‘ä»¬è¦ç”¨çš„ä¸»æ¨¡å—æ˜¯[ä¸ƒæœˆ](https://github.com/e-hulten/july)ã€‚ç¡®ä¿åœ¨ç»§ç»­ä¸‹ä¸€æ­¥ä¹‹å‰å®‰è£…è¯¥æ¨¡å—ã€‚ä¸€æ—¦æ‚¨æˆåŠŸå®‰è£…ï¼Œç»§ç»­å¯¼å…¥è½¯ä»¶åŒ…ã€‚æˆ‘ä»¬è¿˜éœ€è¦ç†ŠçŒ«æ¥å¤„ç†æˆ‘ä»¬çš„æ•°æ®ã€‚ç¡®ä¿åœ¨ç»§ç»­ä¸‹ä¸€æ­¥ä¹‹å‰ä¹Ÿè°ƒç”¨å®ƒã€‚

```
*#!pip install july* import pandas as pd
import july
from july.utils import date_range
```

ä¸€æ—¦æ‚¨æˆåŠŸå®‰è£…ï¼Œç»§ç»­å¯¼å…¥è½¯ä»¶åŒ…ã€‚æˆ‘ä»¬è¿˜éœ€è¦`panda`æ¥å¤„ç†æˆ‘ä»¬çš„æ•°æ®ã€‚ç¡®ä¿åœ¨ç»§ç»­ä¸‹ä¸€æ­¥ä¹‹å‰ä¹Ÿè°ƒç”¨å®ƒã€‚ä½¿ç”¨ pandas æ¨¡å—ï¼Œä¸è¦å¿˜è®°è§£æåˆ—`Date`ä¸Šçš„æ—¥æœŸã€‚

```
*# Read csv file contain list of public holiday*
df = pd.read_csv('2022_my_ph.csv',parse_dates=['Date'])
df.head(3)
```

# **ç¬¬äºŒæ­¥:å¤„ç†æ•°æ®**

è¿™ä¸€æ­¥çš„æƒ³æ³•æ˜¯ç”Ÿæˆå…¨å¹´çš„æ—¥æœŸåˆ—è¡¨ï¼Œå³ã€‚2022ï¼Œå¹¶æ³¨æ„`df`ä¸Šçš„é‡è¦æ—¥æœŸã€‚ä½œä¸ºä¸€ä¸ªå…¸å‹çš„æ—¥å†ï¼Œå¦ä¸€ä¸ªæ ‡è®°ä¹Ÿæ˜¯åœ¨å‘¨æœ«(å‘¨å…­å’Œå‘¨æ—¥)ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†æœ‰ä¸¤ä¸ªä¸åŒçš„æ ‡å¿—:å…¬ä¼—å‡æœŸå’Œå‘¨æœ«ã€‚

`df1`åº”åŒ…æ‹¬ä» 1 æœˆ 1 æ—¥è‡³ 12 æœˆ 31 æ—¥çš„æ—¥æœŸåˆ—è¡¨ï¼Œé¢‘ç‡å¦‚â€œdâ€æ‰€ç¤ºï¼Œè€Œå¦ä¸€ä¸ªåˆ—è¡¨`df1b`åº”åŒ…æ‹¬å¦‚â€œBâ€æ‰€ç¤ºçš„å”¯ä¸€å·¥ä½œæ—¥ã€‚

> å¦‚æœæ‚¨å¸Œæœ›ä½¿ç”¨ä¸åŒçš„æ—¶é—´é¢‘ç‡åˆ›å»ºå¦ä¸€ä¸ªæ•°æ®å¸§ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°æ›´å¤šä¿¡æ¯[åç§»åˆ«å](https://pandas.pydata.org/docs/user_guide/timeseries.html#offset-aliases)ã€‚

```
*# Create list date range in year 2022*
df1 = pd.date_range("2022-01-01","2022-12-31",freq='d')

*# Create list date range in year 2022 ONLY for business day*
df1b = pd.date_range("2022-01-01","2022-12-31",freq='B')
```

ä¸‹ä¸€è¡Œï¼Œ`df2`æ•°æ®å¸§åˆ›å»ºåŒ…å« 365 å¤©çš„é›¶åˆ—è¡¨é›†åˆï¼Œæˆ‘ä»¬å°†åœ¨æ–°çš„æ•°æ®å¸§`df3`ä¸­é›†æˆä½œä¸ºç´¢å¼•æ—¥æœŸçš„`df1`å’Œä½œä¸ºæ•°æ®`value`çš„`df2`ã€‚

```
*# Create list with value zero (0)*
df2 = [0] * 365*# Create data frame df3*
df3 = pd.DataFrame(data = df2, index = df1, columns = ['value'])
```

åœ¨æ–°çš„æ•°æ®å¸§`df3`ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç´¢å¼•å±æ€§`iloc`åœ¨`df1`ä¸­åˆ—å‡ºçš„ç‰¹å®šå…¬å…±å‡æ—¥æ—¥æœŸæ›´æ–°åˆå§‹`value`(é›¶)ã€‚ç±»ä¼¼çš„æ›´æ–°ä¹Ÿæ˜¯ä¸ºäº†çºªå¿µå‘¨æœ«ã€‚

> **æ³¨æ„:**æœ‰å¦å®šè¡¨è¾¾å¼`~`ï¼Œå› ä¸ºæœ€åˆæˆ‘ä»¬æœ‰ä¸€ä¸ªè¥ä¸šæ—¥åˆ—è¡¨`df1b`ã€‚ä½ å¯èƒ½ä¼šè®¤ä¸ºï¼Œå¦‚æœå…¬å…±å‡æ—¥æ˜¯å‘¨æœ«(å‘¨å…­å’Œå‘¨æ—¥)ï¼Œè¿™ç§æ–¹æ³•ä¼šæ©ç›–å…¬å…±å‡æ—¥ã€‚ä½ æ˜¯å¯¹çš„ï¼Œè¿™å–å†³äºæˆ‘ä»¬å¦‚ä½•åˆ©ç”¨å®ƒã€‚

åŸæ¥å¦‚æ­¤ã€‚æˆ‘ä»¬å‡†å¤‡ä½¿ç”¨æ•°æ®æ¡†`df3`ç»˜åˆ¶æ—¥å†ã€‚

```
*# Encode the date according to public holiday listed at df*
*# Update value of df3 in which the df3 index = df['Date']*
df3.iloc[df3.index.isin(df['Date'])] = 1

*# Update value of df3 in which the df3 index is not same as df1b.*
*# All weekend, ie. Saturday and Sunday shall be given value '2'*
df3.iloc[~df3.index.isin(df1b)] = 2
```

# **ç¬¬ä¸‰æ­¥:ç»˜åˆ¶æ—¥å†**

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¨¡å— July ç”Ÿæˆä¸¤ç§æ—¥å†ï¼Œæˆ‘ä»¬å¯ä»¥ç»˜åˆ¶ä¸€ä¸ªå…¸å‹çš„æ—¥å†ï¼Œä¹Ÿå¯ä»¥ç»˜åˆ¶å¦ä¸€ä¸ªç‰ˆæœ¬çš„æ—¥å†ï¼Œå°±åƒæ‚¨åœ¨å…¸å‹çš„ GitHub é…ç½®æ–‡ä»¶ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œè¡¨ç¤ºæˆ‘ä»¬çš„è´¡çŒ®æ´»åŠ¨ã€‚æˆ‘ä¸ªäººçš„åå¥½ï¼Œæˆ‘å‘ç°å…¸å‹çš„æ—¥å†å¯¹æˆ‘æ¥è¯´ç»°ç»°æœ‰ä½™ï¼Œåœ¨å…¬å…±å‡æ—¥å’Œå‘¨æœ«æœ‰ä¸åŒçš„é¢œè‰²ã€‚

```
*# Calendar plot.* 
july.calendar_plot(df3.index, df3['value'],
                   cmap = 'july',
                   date_label = **True**,
                   figsize = **None**)
```

![](img/cc5accefe9a5bc693dfc78336f5851e7.png)

æ—¥å† 2022 |ä½œè€…å›¾ç‰‡

å¯¹äºæŸäº›åº”ç”¨ç¨‹åºæ¥è¯´ï¼ŒGitHub é£æ ¼çš„æ—¥å†å¯èƒ½ä¹Ÿå¾ˆåˆé€‚ã€‚åŒæ ·ï¼Œè¿™å®Œå…¨å–å†³äºæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨å®ƒã€‚å¦å¤–è¦å¼ºè°ƒçš„æ˜¯ï¼Œè¿™ä¸ªæ¨¡å—`July`æ˜¯åœ¨`matplotlib` æ¨¡å—çš„åŸºç¡€ä¸Šåˆ¶ä½œçš„ã€‚ç±»ä¼¼çš„å‚æ•°è°ƒæ•´ä¹Ÿå¯ä»¥åº”ç”¨åˆ°è¿™æ®µä»£ç ä¸­ï¼Œæ¯”å¦‚`[cmap](https://matplotlib.org/3.3.1/tutorials/colors/colormaps.html)`ä½ å–œæ¬¢ç”¨ä»€ä¹ˆé¢œè‰²æ¥æ ‡è®°ä½ çš„æ—¥å†ã€‚

```
july.heatmap(dates=df3.index, 
             data=df3['value'], 
             cmap='Pastel1_r',
             month_grid=**True**, 
             horizontal=**True**,
             value_label=**False**,
             date_label=**True**,
             weekday_label=**True**,
             month_label=**True**, 
             year_label=**True**,
             colorbar=**False**,
             fontfamily="monospace",
             fontsize=8,
             title=**None**,
             titlesize='large',
             dpi=100)
```

![](img/c19f76936e51554583a6deb88f1315d9.png)

github é£æ ¼çš„æ—¥å† 2022 |ä½œè€…å›¾ç‰‡

# **ç»“è®º**

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†ä½¿ç”¨ python æ¨¡å—`July`è‡ªåŠ¨æ ‡è®°æ—¥å†çš„ç®€å•ä»£ç ã€‚æˆ‘å¸Œæœ›æé†’ä½ æ—¥å¸¸æ´»åŠ¨çš„ä»»ä½•ç‰¹æ®Šåœºåˆä¼šå¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚

æ„Ÿè°¢é˜…è¯»ã€‚éšæ„æ´¾ç”Ÿå’Œè°ƒæ•´è¿™ä¸ª [**Github repo**](https://github.com/yudhi-chen/custom_calendar) ä¸­çš„ä»£ç ï¼Œä»¥é€‚åº”æ‚¨çš„æƒ…å†µã€‚

# å‚è€ƒ

[1] python æ¨¡å—[7 æœˆ](https://github.com/e-hulten/july)

æˆ‘å–œæ¬¢åˆ†äº«æ•°æ®åˆ†ææ–¹é¢çš„æœ‰ç”¨çŸ¥è¯†ï¼Œçœ‹çœ‹äººä»¬å¦‚ä½•ä»ä¸­å—ç›Šã€‚åœ¨ Medium ä¸Šå…³æ³¨æˆ‘ï¼Œè®©æˆ‘çŸ¥é“ä½ æ˜¯å¦æœ‰ä»»ä½•å»ºè®¾æ€§çš„æ„è§ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡è¯„è®ºæ¥æ”¹è¿›ã€‚ä½ å¯ä»¥é€šè¿‡ [Linkedin](https://www.linkedin.com/in/yudhi-somali-157ab553/) æˆ–è€… [Twitter](https://twitter.com/ChenYudhi) è·Ÿæˆ‘è”ç³»ã€‚ç¥ä½ å­¦ä¹ åŠªåŠ›ä¸€åˆ‡é¡ºåˆ©ğŸ‘ï¼