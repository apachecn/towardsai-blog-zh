# чФи Elasticsearch хЬи 15 хИЖщТЯхЖЕх╗║члЛф╕Аф╕кцРЬч┤вх╝ХцУО

> хОЯцЦЗя╝Ъ<https://pub.towardsai.net/building-a-search-engine-using-elasticsearch-in-15-minutes-69b010ea420?source=collection_archive---------0----------------------->

## [шЗкчД╢шпншиАхдДчРЖ](https://towardsai.net/p/category/nlp)

## шСЧхРНцЭ┐чРГш┐РхКихСШчЪДцРЬч┤вх╝ХцУО(х░Пч┤вх╝Х)

хдзхо╢хе╜ЁЯШЙ,

ф╗КхдйцИСф╗мх░ЖхЬи 15 хИЖщТЯхЖЕф║ЖшзгхжВф╜ХхЬи Elasticsearch ф╕нцЮДх╗║ф╕Аф╕кцРЬч┤вх╝ХцУОуАВш┐ШцЬЙхдЪчзНх╝Ац║РцКАцЬпф╣ЯхПпф╗ечФицЭецЮДх╗║цРЬч┤вх╝ХцУО(ф╣ЯхПпф╗ечз░ф╕║ч┤вх╝Х)я╝МцпФхжВ SOLRуАВф╜ЖцШпцИСчФиф║Ж ElasticsearchуАВцИСцЬАхИЭчЪДщАЙцЛйц▓бцЬЙчРЖчФ▒уАВ

![](img/78389a7cb64b91477924fb196ddd4513.png)

чФ▒[хоЙх╛╖чГИцЦп┬╖ше┐шТЩ](https://unsplash.com/@johnmcclane?utm_source=medium&utm_medium=referral)хЬи [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ф╕КцЛНцСДчЪДчЕзчЙЗ

ф╕║ф║Жф╛┐ф║ОчРЖшзгя╝МцРЬч┤вх╝ХцУОчЪДцЮДх╗║хПпф╗ехИЖф╕║хдЪф╕кцнещкдуАВф╕║ф║ЖцЫ┤хе╜чЪДчРЖшзгя╝МцИСх░Жф╕Аф╕АшзгщЗКуАВщжЦхЕИя╝МцИСф╗мщЬАшжБф║Жшзгф╗Аф╣ИцШпцРЬч┤вх╝ХцУОя╝Яя╝Яя╝ЯчоАхНХшп┤ф╕Аф╕ЛуАВцРЬч┤вх╝ХцУОхЯ║цЬмф╕Кф╝Ъф╕║чФицИ╖чЪДцЯешпвцПРф╛ЫхРИщАВчЪДч╗УцЮЬуАВцпФхжВцИСф╗мхПпф╗ецГ│хИ░ш░╖цнМуАВш┐ЩцШпф╕Аф╕кх╖ихдзчЪДцРЬч┤вх╝ХцУОуАВш░╖цнМх░ЖхЯ║цЬмф╕Кч╗ЩцИСф╗мцЙАцЬЙцИСф╗мцЙзшбМчЪДцРЬч┤вуАВх░Жф╝ЪцЬЙхдЪф╕кцМЙщб║х║ПцОТхИЧчЪДч╗УцЮЬуАВцЬАщАВхРИцЯешпвчЪДцЦЗцбгх░ЖцМЙцЬАф╕КщЭвчЪДщб║х║Пч╗ЩхЗ║уАВцИСчЫ╕ф┐бф╜ахЬиш┐Щф╕АчВ╣ф╕КчРЖшзгцРЬч┤вх╝ХцУОчЪДцДПф╣ЙуАВш░╖цнМуАБщЫЕшЩОуАБх┐Ех║ФуАБщЧощЧощГ╜цШпцРЬч┤вх╝ХцУОуАВцЙАф╗ецИСф╗мчЪДчЫочЪДф╣ЯцШпф╕Аца╖чЪДя╝МхПкцШпшзДцибх░ПуАВцИСф╝ЪхСКшпЙф╜ахжВф╜Хх╗║члЛф╕Аф╕кшСЧхРНцЭ┐чРГш┐РхКихСШчЪДцРЬч┤вх╝ХцУОч┤вх╝ХуАВ

хЬич╗зч╗нф╣ЛхЙНя╝МцИСф╗мх┐Ещб╗ф║Жшзгф╕Аф║ЫцЬпшпнф╗еф╛┐цЫ┤хе╜хЬ░чРЖшзгуАВцИСхЬиф╕ЛщЭвхИЧхЗ║ф║Жш┐Щца╖чЪДцЬпшпнуАВш┐Щф║ЫцЬпшпнф╕╗шжБф╕Оф┐бцБпцгАч┤вцЬЙхЕ│уАВ

## х╝╣цАзцРЬч┤в

Elasticsearch цШпф╕Аф╕кхИЖх╕Гх╝ПуАБх╝АцФ╛чЪДхИЖцЮРх╝ХцУОуАВElasticsearch ч╗УхРИф║Жч┤вх╝ХцЬпшпнчЪДхАТцОТч┤вх╝ХуАВElasticsearch ф╜┐чФицЬпшпнщвСчОЗ/щАЖхРСцЦЗцбгщвСчОЗф╜Ьф╕║шпДхИЖцЬ║хИ╢уАВхоГцФпцМБшо╕хдЪф╕НхРМч▒╗хЮЛчЪДч┤вх╝ХцЯешпвуАВ

*   Kibana:хЯ║ф║О Elasticsearch чЪДхПпшзЖхМЦх╝ХцУО
*   Index:ч▒╗ф╝╝ф║О MYSQL ш┐Щца╖чЪДцХ░цНох║Уя╝МхоГх░ЖцХ░цНохТМч╗УцЮЬхнШхВихЬиш╛УхЗ║ф╕нф╛ЫчФицИ╖цЯешпвуАВ
*   цЦЗцбг:цХ░цНох║УчЪДшбМуАВф╕кф║║цХ░цНошо░х╜Х

> шойцИСф╗мчлЛхН│х╝АхзЛх╗║шо╛хРзуАВ

1.  **цХ░цНощЗЗщЫЖ**

хп╣ф║Оф╗╗ф╜Хф╕ОцХ░цНочЫ╕хЕ│чЪДх╖еф╜ЬцЭешп┤я╝МцЬАф╕╗шжБф╣ЯцШпцЬАхЫ░щЪ╛чЪДх╖еф╜Ьф╣Лф╕Ах░▒цШпцХ░цНоцФ╢щЫЖуАВхЫаф╕║цИСф╗мцШпхЬих░ПшМГхЫ┤хЖЕхБЪчЪДя╝Мх╖еф╜ЬчЪДф╕Аф╕кч╗┤х║жф╝ЪхЗПх░Ся╝Мф╜ЖцЧашо║хжВф╜Хш┐ШцЬЙхПжф╕Аф╕кч╗┤х║жуАВцИСчФи Cricbuzz ч╜СчлЩхИащЩдф║ЖцМЗцХ░чЪДхОЯхзЛцХ░цНоуАВх╜УцИСчФиц│░ч▒│х░ФшпнхБЪч┤вх╝ХцЧ╢я╝Мф╣ЯцЬЙф╕Аф╕кщвДхдДчРЖцнещкдуАВцКУхПЦчЪДхЕГцХ░цНохМЕхРлчРГхСШхзУхРНуАБх╣┤щ╛ДуАБхЫ╜хо╢уАБчРГхСШч▒╗хЮЛуАБхЗ╗чРГщгОца╝уАБф┐Эщ╛ДчРГщгОца╝уАБх╛ЧхИЖхТМф╕ЙцЯ▒щЧиуАВ

![](img/c36938e0b696bd260061983f89cc2426.png)

ч▒│хНб┬╖щ▓НцвЕцЦпчЙ╣хЬи [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ф╕КчЪДчЕзчЙЗ

2.**цХ░цНощвДхдДчРЖ**

ф╗О Cricbuzz цРЬщЫЖчЪДцХ░цНоцШпшЛ▒цЦЗчЪДуАВцИСф╜┐чФи [beautifulsoup](https://www.crummy.com/software/BeautifulSoup/bs4/doc/) python х║Уф╗Оч╜Сч╗Ьф╕КцКУхПЦцХ░цНоуАВчФ▒ф║ОцРЬч┤вх╝ХцУОх░ЖхЬиц│░ч▒│х░Фшпня╝МцИСф╗мщЬАшжБч┐╗шпСцИР Unicode хТМх░ЖцЬЙф╕Аф║Ыф╕НщЬАшжБчЪДхнЧчмжхЬихИохОЯхзЛцХ░цНоуАВхЬиш┐Щф╕Ацнеф╕ня╝МцИСф╗мщЬАшжБц╕ЕчРЖцХ░цНоуАВцХ░цНочоАхМЦф╣ЯхЬиш┐Щф╕АцнехоМцИРуАВцХ░цНоцКУхПЦхТМщвДхдДчРЖ python чмФшо░ф╣жч▒Н[ш┐ЩщЗМцЬЙ](https://github.com/sthenusan/SearchEngine-IR/blob/main/NoteBook/Web%20Scraping%20Cricbuzz%20for%20a%20player.ipynb)уАВцЙАф╗ехоМцИРш┐Щф╕дф╕кцнещкдхРОя╝Мч╗Пш┐ЗщвДхдДчРЖчЪДхЕ│ф║ОцЭ┐чРГш┐РхКихСШчЪДцХ░цНох░▒цОМцПбхЬицИСф╗мцЙЛф╕нф║ЖуАВф╕ЛщЭвч╗ЩхЗ║ф║ЖщвДхдДчРЖцХ░цНочЪДф╛ЛхнРуАВцХ░цНохЬицКУхПЦхРОц▓бцЬЙцЫ┤цЦ░уАВцЙАф╗ецЬЙф║ЫцХ░цНоф╗ехРОхЬичО░хоЮф╕ЦчХМф╕нхПпшГ╜ф╝ЪцФ╣хПШуАВцИСх╖▓ч╗Пф╕║цРЬч┤вх╝ХцУОцФ╢щЫЖф║Ж 100 хРНчРГхСШчЪДшпжч╗Жш╡ДцЦЩуАВх╣┤щ╛ДуАБWickets хТМ Runs хПкцШпцХ░цНощЫЖф╕нчЪДцХ░хнЧцХ░цНоя╝МшАМхЕ╢ф╗ЦцХ░цНоцШпцЦЗцЬмцХ░цНоуАВ

```
{
тАЬрокрпЖропро░рпНтАЭ: тАЬро╡ро┐ро░ро╛роЯрпН роХрпЛро▓ро┐тАЭ, 
тАЬро╡ропродрпБтАЭ: 33, 
тАЬро╡роХрпИтАЭ: тАЬродрпБроЯрпБрокрпНрокро╛роЯрпНроЯро╡рпАро░ро░рпНтАЭ, 
тАЬродрпБроЯрпБрокрпНрокро╛роЯрпНроЯроорпНтАЭ: тАЬро╡ро▓родрпБроХрпИ родрпБроЯрпБрокрпНрокро╛роЯрпНроЯроорпНтАЭ,
тАЬрокроирпНродрпБро╡рпАроЪрпНроЪрпБтАЭ: тАЬро╡ро▓родрпБроХрпИ ро╡рпЗроХрокроирпНродрпБро╡рпАроЪрпНроЪрпБтАЭ,
тАЬроЕрогро┐тАЭ: тАЬроЗроирпНродро┐ропро╛тАЭ, 
тАЬроЗро▓роХрпНроХрпБроХро│рпНтАЭ: 4, 
тАЬроУроЯрпНроЯроЩрпНроХро│рпНтАЭ: 12169,
тАЬро╡ро┐рокро░роорпНтАЭ:тАЭроЗро╡ро░рпН родро▒рпНрокрпЛродрпБ роЕрогро┐родрпН родро▓рпИро╡ро░ро╛роХ роЙро│рпНро│ро╛ро░рпН. ро╡ро▓родрпБ роХрпИ роороЯрпНроЯрпИропро╛ро│ро░ро╛рой роЗро╡ро░рпН роЪро░рпНро╡родрпЗроЪ роЪро┐ро▒роирпНрод родрпБроЯрпБрокрпНрокро╛роЯ ро╡рпАро░ро░рпНроХро│ро┐ро▓рпН роТро░рпБро╡ро░ро╛роХроХрпН роХро░рпБродрокрпНрокроЯрпБроХро┐ро▒ро╛ро░рпНтАЭ
}
```

3.**хоЙшгЕцЙАщЬАш╜пф╗╢**

![](img/187a2f414529a5131b02404e1ebafe6c.png)

х▒▒хзЖ┬╖хЕЛцЛЙхЕЛхЬи [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ф╕КцЛНцСДчЪДчЕзчЙЗ

х╜УцИСф╗мф╜┐чФи Elasticsearch ш┐ЫшбМч┤вх╝ХцЧ╢я╝МцИСф╗мх┐Ещб╗щжЦхЕИхоЙшгЕ ElasticsearchуАВцВихПпф╗ехЬицндф╕Лш╜╜ Elasticsearch [х╣╢цМЙчЕзшп┤цШОш┐ЫшбМхоЙшгЕуАВцИСшобхИТф╜┐чФи Kibana ф╜Ьф╕║хПпшзЖхМЦх╖ехЕ╖цЭецгАцЯецЭешЗк Elasticsearch чЪДцЯешпвч╗УцЮЬуАВф╜ахПпф╗еф╗О](https://www.elastic.co/start)[ш┐ЩщЗМ](https://www.elastic.co/start)ф╕Лш╜╜хоЙшгЕуАВцВиф╣ЯхПпф╗еф╜┐чФи postman цЭещкМшпБцЭешЗк/хПСх╛А Elasticsearch чЪДшп╖ц▒ВуАВхЬихоЙшгЕф║Жш┐Щф╕дшАЕф╣ЛхРОя╝МцИСф╗мхПпф╗ещАЪш┐ЗхЬиц╡ПшзИхЩиф╕ншо┐щЧоцЬНхКбхЩичЪД URL цЭечоАхНХхЬ░щкМшпБхоЙшгЕуАВхЬиш┐РшбМ URL ф╣ЛхЙНя╝МцВих┐Ещб╗хРпхКиф╕дф╕кх╝ХцУОчЪДцЬНхКбхЩиуАВцВихПкщЬАхЬи bin цЦЗф╗╢хд╣ф╕нцЙУх╝Ач╗Ичлпя╝Мх╣╢ф╕║ kibana цЬНхКбхЩиш╛УхЕе Kibanaя╝Мф╕║ Elasticsearch цЬНхКбхЩиш╛УхЕе ElasticsearchуАВцЬНхКбхЩихРпхКихРОя╝МцИСф╗мхПпф╗ехЬиц╡ПшзИхЩиф╕нцгАцЯе URLуАВхЬищ╗Шшодшо╛ч╜оф╕ня╝МElasticsearch хЬи [http://localhost:9200/](http://localhost:9200/) ф╕Кш┐РшбМя╝МKibana хЬи [http://localhost:5601/](http://localhost:9200/) ф╕Кш┐РшбМуАВхжВцЮЬ Elasticsearch хоЙшгЕцИРхКЯя╝Мц╡ПшзИхЩих░ЖцШ╛чд║ч▒╗ф╝╝ф╕ЛщЭвчЪДц╢ИцБпя╝МшАМх╜УцВихЬиц╡ПшзИхЩиф╕нх░ЭшпХ URL цЧ╢я╝МцИРхКЯхоЙшгЕ Kibana х░ЖцЙУх╝Аф╗кшбицЭ┐уАВ

![](img/2f2c444a01fb48f8f2a8cfcacf6e6adc.png)

ф╜ЬшАЕхЫ╛чЙЗ

4.**х╗║чнСцМЗцХ░**

чФ▒ф║ОцИСф╗мх╖▓ч╗ПцИРхКЯхЬ░цРнх╗║ф║ЖшИЮхП░я╝МцИСф╗мхПпф╗ех╝АхзЛцЮДх╗║ч┤вх╝Хф║ЖуАВхЬихИЫх╗║ч┤вх╝Хф╣ЛхЙНя╝МцИСф╗мщЬАшжБхЬи Elasticsearch ф╕ншо╛ч╜оцИСф╗мчЪДхИЖцЮРхЩиуАВAnalyzer цДПхС│чЭАхоГх░ЖхИЖцЮРчФицИ╖цЯешпвя╝Мх╣╢ф║зчФЯч┤вх╝ХхПпф╗ечРЖшзгчЪДщЗНшжБцЬпшпнуАВф╛ЛхжВя╝МAnalyzer х░ЖцаЗшо░чФицИ╖цЯешпвф╕нчЪДцЬпшпня╝Мх╣╢хИащЩдхБЬчФишпНф╗ешО╖х╛ЧцЫ┤хе╜чЪДч╗УцЮЬуАВцИСш┐ШцПРф╛Ыф║ЖхБЬчФишпНцгАц╡ЛуАБхРМф╣ЙшпНцФпцМБхТМшпНх╣▓хИЖцЮРуАВф╕║ф║ЖцЫ┤хе╜хЬ░чРЖшзгш┐Щф║ЫцЬпшпня╝Мф╜ахПпф╗ехИ░[ш┐ЩщЗМ](https://docs.enterprise.shopware.com/search/developer/stopwords_stemmer/)уАВцЙАцЬЙш┐Щф║ЫщГ╜ф╛Эш╡Цф║ОшпншиАуАВф║ТшБФч╜Сф╕КцЬЙх╛ИхдЪшпНх╣▓хИЖцЮРхЩиуАБхБЬчФишпНшпНхЕ╕уАБхРМф╣ЙшпНцШах░ДуАВф╜ахПпф╗ех╛Ихо╣цШУхЬ░цЙ╛хИ░хоГф╗мя╝Мх╣╢чФихоГф╗мцЭехнжф╣ашЛ▒шпнуАВф╜ЖцШпхп╣ф║Оц│░ч▒│х░Фф║║цЭешп┤я╝Мш╡Дц║РцЫ┤х░СуАВхЫацндя╝МцИСф╕║цндцЙЛхКихИЫх╗║ф║ЖхоГф╗муАВх╜УцВицПРщлШхИЖцЮРхЩичЪДш┤ищЗПцЧ╢я╝МшЗкчД╢ф╝ЪцПРщлШхп╣ч┤вх╝ХчЪДцЯешпвш┤ищЗПуАВшжБх░ЖхИЖцЮРхЩиц╖╗хКахИ░ч┤вх╝Хф╕ня╝МцИСф╗мх┐Ещб╗х░ЖцЙАцЬЙф╕Йф╕к(`stopwords.txt, stem.txt and synonym.txt`)цЦЗф╗╢[хдНхИ╢хИ░ Elasticsearch config цЦЗф╗╢хд╣ф╕нхРНф╕║(цИЦхИЫх╗║)analysis чЪДцЦЗф╗╢хд╣ф╕нуАВш┐Щх┐Ещб╗хЬихИЫх╗║ч┤вх╝Хф╣ЛхЙНхоМцИРуАВцИСх░ЖцИСчЪДч┤вх╝ХхС╜хРНф╕║`cricsearch`уАВ(цВихПпф╗ещЪПцДПхС╜хРНя╝Мф╜ЖщЬАшжБхЭЪцМБф╕ЛхО╗я╝МцЙАцЬЙчлашКВщГ╜хЬихРОщЭв)цИСф╗мх░ЖхЬи Kibana dev tools ф╗кшбицЭ┐ф╕нш┐РшбМцпПф╕кшо╛ч╜охТМцЯешпвуАВцЙАцЬЙчЪДцЯешпвхТМшо╛ч╜ощГ╜ф╜┐чФичЙ╣хоЪф║ОщвЖхЯЯчЪДшпншиАуАВхдНхИ╢хИЖцЮРхЩихРОя╝МцВих┐Ещб╗ш┐РшбМф╗еф╕ЛцЯешпвя╝Мх░ЖхИЖцЮРхЩиц╖╗хКахИ░цЬНхКбхЩиуАВхЯ║цЬмф╕Кя╝Мш┐Щх░Жф╜┐чФишЗкхоЪф╣ЙхИЖцЮРхЩихИЫх╗║ф╕Аф╕кчй║ч┤вх╝Х(ш┐ЩщЗМх░Жф╜┐чФи Elasticsearch ф╕нщ╗ШшодчЪДхАТцОТч┤вх╝Х)уАВш┐Щх░ЖхМЕцЛмшЗкхоЪф╣Йчй║чЩ╜цаЗшо░я╝МшЗкхоЪф╣ЙхБЬчФишпНцгАц╡Ля╝МшЗкхоЪф╣ЙшпНх╣▓хИЖцЮРхЩихТМшЗкхоЪф╣ЙхРМф╣ЙшпНуАВ](https://github.com/sthenusan/SearchEngine-IR/tree/main/Stem_Stop_Synonym)

4.**хРСч┤вх╝Хц╖╗хКацЦЗцбг**

хПпф╗ещАЪш┐З [BULK API](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html) х░ЖцЦЗцбгц╖╗хКахИ░ч┤вх╝Хф╕нуАВф╕╗шжБхПпф╗ещАЪш┐Зф╕дчзНцЦ╣х╝ПцЭехоЮчО░уАВчммф╕АчзНцЦ╣ц│ХцШпф╜┐чФи Python Elasticsearch х║УуАВф╜ахПпф╗ехЬиш┐ЩщЗМцЙ╛хИ░ python хоЮчО░[чЪДф╗гчаБ](https://github.com/sthenusan/SearchEngine-IR/blob/main/NoteBook/bulkdata.py)уАВчммф║МчзНцЦ╣ц│ХцШпщАЪш┐З Kibana Dev х╖ехЕ╖цОзхИ╢хП░чЫ┤цОех░ЖцЦЗцбгц╖╗хКахИ░ Elasticsearch ч┤вх╝Хф╕нуАВф╜ахПпшГ╜ф╝ЪхПСчО░чЙ╣хоЪщвЖхЯЯшпншиАшДЪцЬмхЬиш┐ЩщЗМцШпуАВцИСх╖▓ч╗Пч╗Щф║Жф╕ЛщЭвчЪДшДЪцЬмца╖цЬмца╝х╝ПуАВ

```
POST /_bulk
{ "index" : { "_index" : "cricsearch", "_type" : "_doc", "_id" :1 }}
{"рокрпЖропро░рпН": "ро╡ро┐ро░ро╛роЯрпН роХрпЛро▓ро┐", "ро╡ропродрпБ": 33, "ро╡роХрпИ": "родрпБроЯрпБрокрпНрокро╛роЯрпНроЯро╡рпАро░ро░рпН", "родрпБроЯрпБрокрпНрокро╛роЯрпНроЯроорпН": "ро╡ро▓родрпБроХрпИ родрпБроЯрпБрокрпНрокро╛роЯрпНроЯроорпН", "рокроирпНродрпБро╡рпАроЪрпНроЪрпБ": "ро╡ро▓родрпБроХрпИ ро╡рпЗроХрокроирпНродрпБро╡рпАроЪрпНроЪрпБ", "роЕрогро┐": "роЗроирпНродро┐ропро╛", "роЗро▓роХрпНроХрпБроХро│рпН": 4, "роУроЯрпНроЯроЩрпНроХро│рпН": 12169,"ро╡ро┐рокро░роорпН":"роЗро╡ро░рпН родро▒рпНрокрпЛродрпБ роЕрогро┐родрпН родро▓рпИро╡ро░ро╛роХ роЙро│рпНро│ро╛ро░рпН. ро╡ро▓родрпБ роХрпИ роороЯрпНроЯрпИропро╛ро│ро░ро╛рой роЗро╡ро░рпН роЪро░рпНро╡родрпЗроЪ роЪро┐ро▒роирпНрод родрпБроЯрпБрокрпНрокро╛роЯ ро╡рпАро░ро░рпНроХро│ро┐ро▓рпН роТро░рпБро╡ро░ро╛роХроХрпН роХро░рпБродрокрпНрокроЯрпБроХро┐ро▒ро╛ро░рпН."}
```

хЬицИРхКЯц╖╗хКацЦЗцбгхРОя╝МцИСф╗мчЪДч┤вх╝ХхЗаф╣ОцШпф╜┐чФи Elasicsearch цЮДх╗║чЪДуАВцИСф╗мх░ЖхЬиф╕Лф╕АшКВщАЪш┐ЗщЗЗчЯ│цЭещкМшпБцИСф╗мчЪДцМЗцХ░уАВ

5.**цЯешпвч┤вх╝Х**

ш┤ичЦСх╗║члЛч┤вх╝ХчЪДф╕╗шжБчЫочЪДуАВч┤вх╝Х(цРЬч┤вх╝ХцУО)х┐Ещб╗ф╕║чФицИ╖цЯешпвцПРф╛ЫцЬАхРИщАВчЪДч╗УцЮЬуАВцИСф╗мш┐ШхПпф╗ещАЪш┐Зца╣цНоцЯешпвч╗УцЮЬцЯешпвхТМф┐оцФ╣хИЖцЮРхЩицЭецПРщлШч┤вх╝Хш┤ищЗПуАВцИСх░Жф╜┐чФи Kibana Dev х╖ехЕ╖цОзхИ╢хП░цЭецЯешпвхТМцгАцЯецЯешпвчЪДч╗УцЮЬуАВш┐ЩщЗМф╜аф╣ЯхПпф╗ечФищВощАТхСШуАВ

Elasticsearch цФпцМБхдзщЗПчЪДцЯешпвч▒╗хЮЛуАВцИСф╗мф╝ЪчФиф╛ЛхнРф╕Аф╕кф╕Аф╕кчЬЛуАВхЬицндф╣ЛхЙНя╝Мф╜ахПпф╗ехЬиш┐ЩщЗМцЯечЬЛ[цИСф╣ЯхЬиш┐ЩщЗМц╡ЛшпХф║ЖцИСчЪДхИЖцЮРхЩи(хБЬчФишпНуАБшпНх╣▓хТМхРМф╣ЙшпНцФпцМБ)уАВ](https://github.com/sthenusan/SearchEngine-IR)

**чоАхНХцЯешпв**

*   ф╕ЛщЭвцИСч╗ЩхЗ║ф║Жф╕Аф╕кчоАхНХчЪДшМГхЫ┤цЯешпвуАВхоГхЯ║цЬмф╕Кч╗ЩхЗ║ф║ЖцА╗чзпхИЖ(роУроЯрпНроЯроЩрпНроХро│рпН)ш╢Еш┐З 10000 чЪДчОйхо╢чЪДшпжч╗Жф┐бцБпуАВш┐ЩщЗМ`range`шбичд║шМГхЫ┤цЯешпвя╝М`gte`шбичд║цЫ┤хдзуАВ

```
GET /cricsearch/_search
{
    "query": {
        "range": {
            "роУроЯрпНроЯроЩрпНроХро│рпН" : {
                "gte" : "10000"
            }
        }
    }
}
```

*   ф╕ЛщЭвцШпф╕Аф╕кчФиф║ОцЛ╝хЖЩщФЩшппхдДчРЖчЪДцибч│КхдЪхМ╣щЕНцЯешпвчЪДф╛ЛхнРуАВш┐ЩщЗМчЪДцЯешпвх░Жч╗ЩхЗ║ро╡ро┐ро░ро╛роЯрпН роХрпЛро▓ро┐).чЪДшпжч╗Жф┐бцБпх╜У`fuzziness`швлшо╛ч╜оф╕║`AUTO`цЧ╢я╝МхН│ф╜┐цЬЙф╕АхоЪчиЛх║жчЪДцЛ╝хЖЩщФЩшппя╝МхоГф╣Яф╝Ъч╗ЩхЗ║цнгчбочЪДч╗УцЮЬ

```
GET /cricsearch/_search
{
   "size":1,
   "query": {
       "multi_match" : {
           "query" : "ро╡ро┐ро░ро╛роЯрпН роХрпЛро▓ро┐",
           "fuzziness": "AUTO",
       "analyzer": "my_analyzer"
       }
   }
}
```

**х╕Гх░ФцЯешпв**

*   хЬи Elasticsearch ф╕ня╝Мф╕НхРМчЪДцЬпшпнцФпцМБх╕Гх░ФцЯешпвуАВ**цИЦ**цЛ╝хЖЩф╕║`should`**цЛ╝хЖЩф╕║`must`я╝МNOT цЛ╝хЖЩф╕║`must_not`уАВцИСч╗ЩхЗ║ф║Жф╕Аф╕кчЫ╕хп╣чоАхНХчЪДцЯешпвя╝МхжВф╕Лф╛ЛцЙАчд║уАВ**
*   **шпецЯешпвшжБц▒ВчОйхо╢цШпф╕Аф╕кхЕишГ╜(роЪроХро▓родрпБро▒рпИро╡рпАро░ро░рпН) **цИЦ**ф┐Эщ╛ДчРГцЙЛ(рокроирпНродрпБро╡рпАроЪрпНроЪро╛ро│ро░рпН)я╝МцЛецЬЙш╢Еш┐З 60 ф╕кф╕ЙцЯ▒щЧи(роЗро▓роХрпНроХрпБроХро│рпН) **хТМ**ф╗ЦчЪДф┐Эщ╛ДчРГч▒╗хЮЛ(рокроирпНродрпБро╡рпАроЪрпНроЪрпБ)must хМ╣щЕНхП│шЗВх┐лщАЯф┐Эщ╛ДчРГ(ро╡ро▓родрпБроХрпИ ро╡рпЗроХрокроирпНродрпБро╡рпАроЪрпНроЪрпБ)я╝Мф╗Цх┐Ещб╗**ф╕НцШп**цЭешЗкц╛│хдзхИйф║Ъ(роЕро╕рпНродро┐ро░рпЗро▓ро┐ропро╛).**

```
GET /cricsearch/_search
{
 "query": {
   "bool": {
     "must": {
       "bool" : { 
         "should": [
           { "match": { "ро╡роХрпИ": "роЪроХро▓родрпБро▒рпИро╡рпАро░ро░рпН" }},
           { "match": { "ро╡роХрпИ": "рокроирпНродрпБро╡рпАроЪрпНроЪро╛ро│ро░рпН" }} 
         ],
         "filter": [ 
       {
         "range": {
           "роЗро▓роХрпНроХрпБроХро│рпН" : {
               "gte" : "60"
           }
         }
       }
     ],
         "must": { "match": { "рокроирпНродрпБро╡рпАроЪрпНроЪрпБ": "ро╡ро▓родрпБроХрпИ ро╡рпЗроХрокроирпНродрпБро╡рпАроЪрпНроЪрпБ" }} 
       }
     },
     "must_not": { "match": {"роЕрогро┐": "роЕро╕рпНродро┐ро░рпЗро▓ро┐ропро╛" }}
   }
 }
}
```

****щАЪщЕНчмжцЯешпв****

*   **щАЪщЕНчмжцЯешпвцДПхС│чЭАхЯ║ф║ОцМЗхоЪчЪДцибх╝ПхМ╣щЕНшО╖хПЦцХ░цНоуАВх╜УцИСф╗мф╕НчЯещБУшпецЬпшпнчЪДчбохИЗцЛ╝хЖЩцЧ╢я╝Мш┐Щх╛ИцЬЙх╕охКйуАВElasticsearch ф╣ЯцФпцМБш┐Щч▒╗цЯешпвуАВф╕ЛщЭвцИСх░Жх▒Хчд║ф╕Аф║Ыф╕НхРМч▒╗хЮЛчЪДщАЪщЕНчмжцЯешпвуАВ**
*   **ф╕ЛщЭвчЪДцЯешпвх░Жхп╝шЗ┤чРГхСШхзУхРН(рокрпЖропро░рпН)ф╗етАЬро▓ро┐тАЭхнЧцпНч╗Ух░╛уАВ**

```
GET /cricsearch/_search
{
    "query": {
        "wildcard" : {
	        "рокрпЖропро░рпН" : "*ро▓ро┐"     
	 }
    }
}
```

*   **цРЬч┤вф╗етАЬро▓ро┐тАЭх╝Ахд┤чЪДчРГхСШхРНхнЧя╝МхПпф╗ех╛Ихо╣цШУхЬ░щАЪш┐Зх░Жф╕КщЭвцЯешпвф╕нчЪД`"рокрпЖропро░рпН" : "*ро▓ро┐"`цФ╣ф╕║`"рокрпЖропро░рпН" : "ро▓ро┐*"`цЭецЯешпвуАВ**
*   **хЬиф╕КщЭвчЪДцЯешпвф╕ня╝Мх░Ж`"рокрпЖропро░рпН" : "*ро▓ро┐"`цФ╣ф╕║`"рокрпЖропро░рпН" : "*ро░рпНрой*"`я╝МхПпф╗ецЙ╛хИ░хРНхнЧф╕нщЧ┤цЬЙтАЬро░рпНройтАЭхнЧцпНчЪДчОйхо╢хРНхнЧуАВф╜ахПпф╗ехЬиш┐ЩщЗМцЙ╛хИ░цЙАцЬЙф╕НхРМч▒╗хЮЛчЪДщАЪщЕНчмжцЯешпв[уАВ](https://github.com/sthenusan/SearchEngine-IR)**

****цЫ┤хГПш┐Щца╖чЪДцЯешпв****

*   **ш┐ЩцШпх╝╣цАзцРЬч┤вф╕нчЪДф╕АчзНщлШч║зцЯешпвцЦ╣ц│ХуАВхоГф╜┐чФицЦЗцЬмцМЦцОШцЭешО╖х╛Чч┤вх╝Хф╕нцЦЗцбгчЪДцнгчбоч╗УцЮЬуАВ**
*   **ф╗еф╕ЛцЯешпвф╜┐чФицЦЗцЬмцМЦцОШхЬицпПф╕кцЦЗцбгчЪД bio (ро╡ро┐рокро░роорпН)хнЧцо╡ф╕нцРЬч┤вф║Ж`"роЗро╡ро░рпН роРроЪро┐роЪро┐ропро┐ройрпН роТро░рпБроиро╛ро│рпН рокройрпНройро╛роЯрпНроЯрпБродрпН родрпБроЯрпБрокрпНрокро╛роЯрпНроЯродрпНродро┐ройрпН рокройрпНроорпБроХ роЖроЯрпНроЯроХрпНроХро╛ро░ро░рпНроХро│рпН"`хПехнРуАВш┐Щх░Жф╗ОцЦЗцбгчЪД bio (ро╡ро┐рокро░роорпН)хнЧцо╡чЪДф╕Кш┐░хПехнРф╕нцгАч┤вшЗ│х░СцЬЙф╕Аф╕кцЬпшпн(хжВцИСхЬицЯешпвф╕нцМЗхоЪчЪД`"min_term_freq" : 1`)чЪДцЙАцЬЙцЦЗцбгуАВ**

```
GET /cricsearch/_search
{
  "query": {
    "more_like_this" : {
      "fields" : ["ро╡ро┐рокро░роорпН"],  
      "like" : "роЗро╡ро░рпН роРроЪро┐роЪро┐ропро┐ройрпН роТро░рпБроиро╛ро│рпН рокройрпНройро╛роЯрпНроЯрпБродрпН родрпБроЯрпБрокрпНрокро╛роЯрпНроЯродрпНродро┐ройрпН   рокройрпНроорпБроХ роЖроЯрпНроЯроХрпНроХро╛ро░ро░рпНроХро│рпН",
      "min_term_freq" : 1,
      "max_query_terms" : 12
    }
  }
}
```

****хИЖцб╢цЯешпв****

*   **ш┐ЩчзНч▒╗хЮЛчЪДцЯешпвх░ЖцЬЙхКйф║Оца╣цНоцЯРф║ЫхнЧцо╡хп╣цЦЗцбгш┐ЫшбМхИЖч╗ДуАВхЬиф╕ЛщЭвчЪДф╛ЛхнРф╕ня╝МцИСчФичРГщШЯ(роЕрогро┐)ф╜Ьф╕║хЬ║хЬ░цЭехИЖч╗ДчРГхСШуАВшпецЯешпвх░Жш╛УхЗ║хМЕхРлчОйхо╢цХ░щЗПчЪДчРГщШЯхИЧшбиуАВ**

```
GET /cricsearch/_search 
{
  "aggs": {
    "group_by_team": {
      "terms": { "field": "роЕрогро┐.keyword" }
    }
  }
}
```

**ш┐ЩщЗМцЬЙф╕Аф║ЫцЫ┤хдНцЭВчЪДцЯешпвуАВф╜аф╣ЯхПпф╗ешпХшпХуАВцЙАф╗ехЬиш┐ЗхО╗чЪДхЗахИЖщТЯщЗМя╝МцИСф╗мцИРхКЯхЬ░хЬи Elasticsearch ф╕нх╗║члЛф║Жф╕Аф╕кцРЬч┤вя╝Мх╣╢щАЪш┐ЗхдЪчзНф╕НхРМч▒╗хЮЛчЪДцЯешпвхп╣хЕ╢ш┐ЫшбМф║ЖцгАцЯеуАВчЬЛчЬЛцИСчЪД GitHub repoя╝МхЕ╢ф╕нхМЕхРлш┐Щф║Ыф╗гчаБя╝Мф╗еш┐Ыф╕Ацнец╛Дц╕ЕуАВхнжф╣ацЦ░ф║ЛчЙйчЪДцЬАф╜│хоЮш╖╡цА╗цШпцИСф╗мшЗкх╖▒хО╗х░ЭшпХуАВч╗ПщкМц░╕ш┐ЬцШпцЫ┤хе╜чЪДшАБх╕ИуАВхЫацндя╝Мшп╖хЕ│ц│иш┐ЩчпЗхНЪховя╝Мх░ЭшпХф╕Аф╕ЛхРзуАВхЬиш┐Ыцнеф╕нф╜аф╝ЪхнжхИ░цЫ┤хдЪуАВ**

**цИСчЫ╕ф┐бф╜ах╖▓ч╗ПчРЖшзгф║Жф╕КщЭвшоишо║чЪДхЕ│ф║Ох╝╣цАзцРЬч┤вхТМч┤вх╝ХчЪДцЙАцЬЙщЧощвШуАВхжВцЮЬцВицЬЙф╗╗ф╜ХщЧощвШцИЦф╗╗ф╜Хц╛Дц╕Ея╝Мф╕НшжБчК╣ш▒ля╝МщАЪш┐ЗхЫЮхдНщГихИЖф╕ОцИСшБФч│╗уАВцДЯш░вцВишК▒ш┤╣хоЭш┤╡чЪДцЧ╢щЧ┤щШЕшп╗цЬмхНЪховя╝МцИСчЫ╕ф┐бш┐Щх░Жц┐АхК▒цВич╗зч╗нхнжф╣ацЫ┤хдЪхЕ│ф║Ох╝╣цАзцРЬч┤вхТМф┐бцБпцгАч┤вчЪДчЯешпЖуАВ**

*****цмгш╡ПцЦЗчлая╝ЯцИРф╕║*** [***ф╕нчнЙф╝ЪхСШ***](https://sthenusan.medium.com/membership) ***ч╗зч╗нцЧащЩРхИ╢хнжф╣ауАВхжВцЮЬф╜аф╜┐чФиф╕КщЭвчЪДщУ╛цОея╝МцИСф╝ЪцФ╢хИ░ф╜ачЪДф╕АщГихИЖф╝ЪхСШш┤╣я╝Мф╕НщЬАшжБф╜ащвЭхдЦф╗Шш┤╣уАВцПРхЙНцДЯш░вуАВ*****

**![](img/2f2acfe3058078835ebcbf3563f76e81.png)**

**ф╣ФцБй┬╖ц│░цгохЬи [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ф╕КчЪДчЕзчЙЗ**