# å¦‚ä½•å¯¹æ‚¨çš„æ•°æ®ç§‘å­¦é¡¹ç›®è¿›è¡Œåˆ†ç±»â€”â€”å¿«é€ŸæŒ‡å—

> åŸæ–‡ï¼š<https://pub.towardsai.net/how-to-dockerize-your-data-science-project-a-quick-guide-b6fa2d6a8ba1?source=collection_archive---------1----------------------->

## [æ•°æ®ç§‘å­¦](https://towardsai.net/p/category/data-science)

## æˆ‘æ¯æ¬¡éƒ½æ˜¯å¦‚ä½•é€šè¿‡è¿™äº›ç®€å•æ˜“è¡Œçš„æ­¥éª¤è¿›è¡Œéƒ¨ç½²çš„ï¼

![](img/fd25214e9d6c70c128cc064012e76aad.png)

å›¾ç‰‡æ¥è‡ª[æ—…æ¸¸æ¥æº](https://unsplash.com/@travelsourced?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

åœ¨[ä¹‹å‰çš„æ–‡ç« ](https://towardsdatascience.com/a-guide-to-streamlit-frontend-for-data-science-made-simpler-c6dda54e3183?source=your_stories_page-------------------------------------)ä¸­ï¼Œæˆ‘è¯¦ç»†æè¿°äº†ä½¿ç”¨ fastai ä»æˆ‘ä»¬çš„å›¾åƒåˆ†ç±»æ¨¡å‹åˆ¶ä½œä¸€ä¸ªå®Œæ•´çš„äº¤äº’å¼ web åº”ç”¨ç¨‹åºçš„æ‰€æœ‰æ­¥éª¤ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†æ¢è®¨å¦‚ä½•ä½¿åº”ç”¨ç¨‹åºç‹¬ç«‹äºå¹³å°å¹¶ä¾¿äºå…±äº«ã€‚

## é¦–å…ˆï¼Œç®€å•ä»‹ç»ä¸€ä¸‹â€¦

[**Docker**](https://www.docker.com) æ˜¯ä¸€æ¬¾è½¯ä»¶å¼€å‘å·¥å…·ï¼Œé€šè¿‡åœ¨ä¸€ä¸ªåä¸º**å®¹å™¨**çš„æ•´æ´åŒ…ä¸­ç®¡ç†æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„ä»£ç å’Œæ‰€æœ‰å¿…éœ€çš„åº“åŠå…¶ä¾èµ–é¡¹ï¼Œä½¿æˆ‘ä»¬çš„ç”Ÿæ´»å˜å¾—æ›´åŠ è½»æ¾ã€‚

> **è¿™æ„å‘³ç€:**
> 
> ä½ åªéœ€æ‹¿èµ·ä½ çš„é¡¹ç›®ï¼Œåœ¨ä¸€ä¸ª **Dockerfile** çš„å¸®åŠ©ä¸‹ï¼Œç”¨ä¸€è¡Œä»£ç å°†å…¶è½¬æ¢æˆ docker æ˜ åƒï¼Œç„¶åå¯ä»¥åœ¨ä»»ä½•æœºå™¨ä¸Šç®€å•åœ°è¿è¡Œï¼Œç”¨å¦ä¸€è¡Œä»£ç æ‰§è¡Œåº”ç”¨ç¨‹åºï¼Œè€Œæ— éœ€æ‰‹åŠ¨è¿è¡Œä»»ä½•å…¶ä»–å‘½ä»¤æˆ–å®‰è£…ä»»ä½•å…¶ä»–ä¸œè¥¿ã€‚Docker è‡ªåŠ¨å®Œæˆè¿™ä¸€åˆ‡ã€‚

åœ¨æ‚¨çš„æœºå™¨ä¸Šå®‰è£… Docker çš„æ­¥éª¤æœ€å¤šä¸ä¼šè¶…è¿‡äº”åˆ†é’Ÿï¼Œå¯åœ¨[è¿™é‡Œçš„](https://www.docker.com/get-started)ç®€å•æ­¥éª¤ä¸­æ‰¾åˆ°ã€‚

å¯¹äºå¤§å¤šæ•°ç”¨ä¾‹æ¥è¯´ï¼ŒDocker Desktop å·²ç»è¶³å¤Ÿäº†ï¼Œæ‰€ä»¥ç»§ç»­å®‰è£…å§ã€‚

![](img/711a2b41c0a2d9c4f8ca7eb3d5d86073.png)

docker æ¡Œé¢çš„é¦–é€‰é¡¹

**ä¸€ä¸ªé‡è¦çš„æ³¨æ„äº‹é¡¹:**åœ¨ä½ ç¬¬ä¸€æ¬¡å¯åŠ¨ Docker Desktop ä¹‹åï¼Œç¡®ä¿ç‚¹å‡» *preferences* å¹¶ä¸º Docker è¿è¡Œé€‰æ‹©æœ€ä½**3GB**çš„å†…å­˜ï¼Œå¦åˆ™æœ‰æ—¶ï¼Œå®ƒå¯èƒ½ä¼šç»™ä½ å°†æ¥å®‰è£…çš„æœºå™¨å­¦ä¹ æˆ–æ·±åº¦å­¦ä¹ åº“å¸¦æ¥ä¸€äº›é—®é¢˜ï¼Œæœ€ç»ˆéœ€è¦æ›´å¤šå†…å­˜ã€‚å®ƒå‘ç”Ÿåœ¨æˆ‘èº«ä¸Šï¼Œæˆ‘æŠŠè¿™ä¸ªå°æç¤ºæ”¾åœ¨è¿™é‡Œï¼Œä»¥ç¡®ä¿ä½ ä¸ä¼šä¹Ÿé¢ä¸´å®ƒã€‚:)

## ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç»§ç»­è®¨è®ºå¦‚ä½•ä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ„å»º docker æ–‡ä»¶

è¯¥åº”ç”¨ç¨‹åºçš„å®Œæ•´ä»£ç åº“ä½äºè¿™ä¸ª GitHub å­˜å‚¨åº“ä¸­ã€‚å¦‚æœæ‚¨æƒ³åœ¨å­¦ä¹ æœ¬æ•™ç¨‹çš„è¿‡ç¨‹ä¸­å…¨é¢äº†è§£ä¸€ä¸‹ä»£ç ï¼Œæ¬¢è¿æ‚¨ã€‚

æˆ‘æ‰¿è¯ºäº†ç®€å•æ˜“è¡Œçš„æ­¥éª¤ï¼Œæ‰€ä»¥æˆ‘æ¥äº†ã€‚æˆ‘ä»¬èµ°å§:

## æ„å»ºæ‚¨çš„éœ€æ±‚æ–‡ä»¶

æˆ‘è™”è¯šåœ°ä½¿ç”¨ **pipenv** æ¥ç®¡ç†æˆ‘æ‰€æœ‰çš„ python é¡¹ç›®å’Œç¯å¢ƒã€‚æˆ‘æ‰¿è®¤è¿™æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„å·¥å…·ï¼Œè€Œä¸”å­¦ä¹ æ›²çº¿ä¹Ÿå¾ˆçŸ­ã€‚è®¾ç½®æ‚¨çš„æ•°æ®ç§‘å­¦ç¯å¢ƒåº”è¯¥å°½å¯èƒ½å®¹æ˜“å’Œè½»æ¾ï¼Œæˆ‘åœ¨æˆ‘çš„ä¸€ç¯‡æ–‡ç« [ä¸­ä¹Ÿè¯¦ç»†è°ˆåˆ°äº†è¿™ä¸€ç‚¹ã€‚](https://medium.com/this-code/5-step-guide-to-setting-up-a-new-python-environment-for-data-science-fcae3c3951c7?source=your_stories_page-------------------------------------)

æˆ‘ä»¬å°†ä½¿ç”¨ **pip freeze** å‘½ä»¤ä¸ºæˆ‘ä»¬çš„å›¾åƒåˆ†ç±»åº”ç”¨ç¨‹åºæ„å»ºæ–‡ä»¶ã€‚åœ¨ç»ˆç«¯ä¸­ï¼Œé”®å…¥å¹¶è¾“å…¥:

```
pipenv run pip freeze > requirements.txt
```

åœ¨æ‚¨çš„æ ¹é¡¹ç›®ç›®å½•ä¸­ï¼Œæ‚¨å°†çœ‹åˆ°æ–°æ–‡ä»¶å·²ç»åˆ›å»ºã€‚è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„æ­¥éª¤ï¼Œå› ä¸ºå®ƒå®šä¹‰äº†æˆ‘ä»¬æ„å»º docker æ˜ åƒæ—¶å°†åŒ…å«çš„æ¯ä¸ªåº“å’Œä¾èµ–é¡¹ã€‚

ä¸‹ä¸€æ­¥éœ€è¦å®é™…æ„å»º Dockerfile æ–‡ä»¶ã€‚

## å†™ä¸‹ä½ çš„æ–‡æ¡£

åœ¨å‘æ‚¨å±•ç¤ºæ„å»ºå®ƒçš„ä»£ç ä¹‹å‰ï¼Œè®©æˆ‘å…ˆé‡ç”³ä¸€ä¸‹é¡¹ç›®ç»“æ„çš„é‡è¦æ€§ï¼Œä»¥åŠæˆ‘çš„ç»“æ„åœ¨æ•´ä¸ªé¡¹ç›®ä¸­çš„è¡¨ç°ã€‚

![](img/e56337a4b8fec2aef31d690f8bc9cd90.png)

æˆ‘ä½¿ç”¨çš„é¡¹ç›®ç»“æ„

ç¡®ä¿å½“**åœ¨ä¸Šé¢æ˜¾ç¤ºçš„**åˆ°**åº”ç”¨ç¨‹åº**ç›®å½•ä¹‹å¤–æ—¶ï¼Œåˆ¶ä½œä½ çš„ docker æ–‡ä»¶ã€‚

```
touch Dockerfile
```

åœ¨æ‚¨æœ€å–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œå°†ä»¥ä¸‹ä»£ç ç‰‡æ®µç²˜è´´åˆ°å…¶ä¸­å¹¶ä¿å­˜è¯¥æ–‡ä»¶:

```
FROM python:3.9.1
EXPOSE 8501
COPY ./requirements.txt /requirements.txt
WORKDIR /
RUN pip3 install -r requirements.txt
COPY . /
ENTRYPOINT ["streamlit", "run"]
CMD ["start.py"]
WORKDIR /app
```

ç°åœ¨è®©æˆ‘ä»¬ä¸€è¡Œä¸€è¡Œåœ°æ£€æŸ¥è¿™äº›æŒ‡ä»¤ã€‚

*   **FROM** æ˜¯æ¯ä¸ª Dockerfile æ–‡ä»¶çš„å¼€å¤´ã€‚å®ƒé™ˆè¿°äº†æˆ‘ä»¬çš„æ˜ åƒå°†åœ¨å…¶ä¸­æ„å»ºå’Œè¿è¡Œçš„ç¯å¢ƒï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯ Python ç¯å¢ƒã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œè¿™ä¹Ÿå¯ä»¥æ˜¯å·²ç»å­˜åœ¨çš„ docker æ˜ åƒï¼Œå¦‚ Ubuntu ç­‰æ“ä½œç³»ç»Ÿçš„æ˜ åƒï¼Œnginx ç­‰æœåŠ¡å™¨çš„æ˜ åƒã€‚
*   **EXPOSE** è¡¨ç¤ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå°†è¦è¿è¡Œçš„ç«¯å£ã€‚åœ¨å‰ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°æˆ‘ä»¬çš„ streamlit åº”ç”¨ç¨‹åºæ€»æ˜¯åœ¨ç«¯å£ 8501 ä¸Šè¿è¡Œï¼Œå› æ­¤æˆ‘ä»¬åœ¨ Dockerfile ä¸­å…¬å¼€äº†å®ƒã€‚
*   **å¤åˆ¶**å‘½ä»¤åœ¨æ–‡ä»¶ä¸­ä½¿ç”¨äº†ä¸¤æ¬¡ã€‚å®ƒçš„åŸºæœ¬åŠŸèƒ½æ˜¯å°†æ‰€æœ‰é‡è¦çš„ä»£ç å’Œå…¶ä»–æ–‡ä»¶å¤åˆ¶åˆ° docker é•œåƒä¸­ã€‚**ã€‚(ç‚¹)**è¡¨ç¤ºæˆ‘ä»¬æƒ³è¦å°†æ•´ä¸ªåº”ç”¨ç¨‹åºç›®å½•å¤åˆ¶åˆ° docker æ˜ åƒä¸­ã€‚
*   æ­£å¦‚ä½ å¯èƒ½å·²ç»çŒœåˆ°çš„ï¼ŒWORKDIR å£°æ˜æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå°†ä»å“ªä¸ªå·¥ä½œç›®å½•è¿è¡Œã€‚ä¸ºäº†è¿è¡Œä¸‹ä¸€è¡Œâ†’ `**pip3 install -r requirements.txt**` **,æˆ‘ä»¬é¦–å…ˆå°†å®ƒæ›´æ”¹åˆ° app ç›®å½•ä¹‹å¤–ã€‚**åœ¨æœ€åä¸€è¡Œï¼Œæˆ‘ä»¬å°†å®ƒæ”¹å› app ç›®å½•ï¼Œå› ä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå°†è¦æ‰§è¡Œçš„ **start.py** æ–‡ä»¶å°±åœ¨é‚£é‡Œã€‚
*   æœ€åï¼Œ **CMD** å’Œ **ENTRYPOINT** æ˜¯ä¸¤ä¸ªå…³é”®å­—ï¼Œç”¨äºæè¿°åœ¨ç»ˆç«¯ä¸Šè¿è¡Œçš„å‘½ä»¤ï¼Œä»¥ä»å®¹å™¨å†…å¯åŠ¨åº”ç”¨ç¨‹åºã€‚è¿è¡Œæˆ‘ä»¬ app çš„è¡Œæ˜¯: **streamlit run start.py.** è¿™ä¸ªä¹Ÿå¯ä»¥ç®€å•å†™æˆ:`**CMD [â€œstreamlitâ€, â€œrunâ€, â€œstart.pyâ€]**`ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼ŒCMD å’Œ ENTRYPOINT çš„ç»“åˆæ˜¯ Docker å®¹å™¨çš„æœ€ä½³è§£å†³æ–¹æ¡ˆã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ**å¯æ‰§è¡Œæ–‡ä»¶æ˜¯ç”¨ ENTRYPOINT å®šä¹‰çš„ï¼Œè€Œ CMD æŒ‡å®šé»˜è®¤å‚æ•°ï¼Œ**å°±åƒæˆ‘ä»¬åœ¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­æ‰€åšçš„ä¸€æ ·ã€‚

æˆ‘ä»¬å¿«å®Œäº†ï¼æœ€åä¸€æ­¥æ˜¯æ„å»ºå¹¶è¿è¡Œè¿™ä¸ª Dockerfile æ–‡ä»¶ã€‚

## **æ„å»ºå¹¶è¿è¡Œ docker æ˜ åƒ**

æˆ‘æ‰¿è¯ºè¿™ä¸€æ­¥æœ‰ä¸¤è¡Œä»£ç ï¼Œæ‰€ä»¥æˆ‘ä»¬å¼€å§‹å§ï¼

é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ„å»ºæ˜ åƒ:

```
docker build --tag rps:1.0 .
```

`â€” tag`ä»…ç”¨äºç¡®ä¿æˆ‘ä»¬çš„ docker å›¾åƒé™„å¸¦æœ‰åç§°å’Œç‰ˆæœ¬ã€‚è¿™åªæ˜¯æˆ‘ä»¬å›¾åƒçš„äººç±»å¯è¯»å½¢å¼ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘æŠŠè±¡å¾*çŸ³å¤´å‰ªåˆ€å¸ƒ*çš„*â€˜RPSâ€™*ä½œä¸ºè¿™å¼ å›¾ç‰‡çš„æ ‡ç­¾ã€‚

åœ¨è¿è¡Œè¿™ä¸ªå‘½ä»¤çš„æ—¶å€™ï¼Œä½ ä¸€å®šæ³¨æ„åˆ°ä¸‹è½½äº†å¾ˆå¤šâ€œå±‚â€ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ­£åœ¨æ„å»º python 3.9.1 ç¯å¢ƒï¼Œå¹¶å®‰è£… docker æ–‡ä»¶ä¸­ç”¨ RUN å‘½ä»¤æŒ‡å®šçš„æ‰€æœ‰ä¾èµ–é¡¹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„åŸºæœ¬ Python æ˜ åƒè¦ä¹ˆä» docker hub ä¸‹è½½ï¼Œè¦ä¹ˆä»æœ¬åœ°æœºå™¨è·å–(å¦‚æœå¯ç”¨çš„è¯)ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬çš„åº“å°†ä»éœ€æ±‚æ–‡ä»¶ä¸­å®‰è£…ã€‚

`docker build`å‘½ä»¤æœ«å°¾çš„`.`è¡¨ç¤º Docker åº”è¯¥åœ¨æˆ‘ä»¬å½“å‰çš„ç›®å½•ä¸­å¯»æ‰¾ Dockerfileã€‚

## æœ€åä¸€æ­¥æ˜¯è¿è¡Œæˆ‘ä»¬æ„å»ºçš„å®¹å™¨æ˜ åƒ

```
docker run --publish 8501:8501 -it rps:1.0
```

`â€” it`ç”¨äºç¡®ä¿ç»ˆç«¯å‘½ä»¤ç­‰å…¶ä»–è¿­ä»£è¿‡ç¨‹å¯ä»¥ä» docker å®¹å™¨ä¸­è¿è¡Œã€‚æ­¤å¤–ï¼Œ`â€”- publish`å¸®åŠ©æˆ‘ä»¬åœ¨ 8501 ç«¯å£çš„æµè§ˆå™¨ä¸­è¿è¡Œæˆ‘ä»¬çš„ streamlit web åº”ç”¨ç¨‹åºã€‚

å¯¼èˆªè‡³:`localhost:8501`æŸ¥çœ‹åº”ç”¨ç¨‹åºçš„è¿è¡Œæƒ…å†µï¼

æˆ‘ä»¬åšåˆ°äº†ï¼

![](img/bb02e6e80f6f9f20a6cf5328919ead3a.png)

ç”±[å®‰ä¸œÂ·èˆ’ç“¦æ´›å¤«](https://unsplash.com/@a8ka?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

## ç»“æŸâ€¦

æ„å»ºæ•°æ®ç§‘å­¦é¡¹ç›®éœ€è¦ä»˜å‡ºå¾ˆå¤šåŠªåŠ›ï¼Œè€Œè®©å¤–éƒ¨äººå‘˜å¯ä»¥ä½¿ç”¨æˆ‘ä»¬çš„å·¥ä½œæ˜¯æ‰€æœ‰å·¥ä½œä¹‹ä¸Šçš„ä¸€äº›é¢å¤–å·¥ä½œã€‚åœ¨è¿™ä¸€ç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å°†æˆ‘ä»¬çš„å›¾åƒåˆ†ç±»å¼•æ“æ‰“åŒ…åˆ°ä¸€ä¸ª web åº”ç”¨ç¨‹åºä¸­ï¼Œç„¶åç¡®ä¿å®ƒä¹Ÿå¯ä»¥ç”±å…¶ä»–äººåœ¨ä¸åŒçš„æœºå™¨ä¸Šæå…¶è½»æ¾åœ°è¿è¡Œã€‚

ä¾æˆ‘æ‹™è§ï¼ŒDocker çš„å¤šåŠŸèƒ½æ€§ç»å¯¹ä»¤äººæƒŠå¹ï¼Œå¦‚æœä½ æƒ³åœ¨æˆ‘æ¥ä¸‹æ¥çš„é¡¹ç›®ä¸­æ¢ç´¢æ›´å¤šï¼Œå¹¶åœ¨æˆ‘è®°å½•æ›´å¤šå…³äºå®ƒä»¬çš„å†…å®¹æ—¶ï¼Œè¯·ç»§ç»­å…³æ³¨ã€‚

**æ‚¨å¯ä»¥åˆ©ç”¨ä»¥ä¸‹èµ„æºæ‰©å±•æ‚¨çš„çŸ¥è¯†:**

*   ç”¨è¿™ä¸ª[æ ˆæº¢å‡º post](https://stackoverflow.com/questions/21553353/what-is-the-difference-between-cmd-and-entrypoint-in-a-dockerfile) æ¯”è¾ƒ Dockerfile ä¸­çš„ ENTRYPOINT å’Œ CMD å‘½ä»¤ã€‚
*   Docker åœ¨ä»–ä»¬çš„å®˜æ–¹é¡µé¢ä¸Šæ„å»ºå¹¶è¿è¡Œæµç¨‹æ¦‚è¿°[ã€‚](https://docs.docker.com/get-started/overview/)

æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼ğŸ˜

> æˆ‘æ‰€æœ‰æ–‡ç« çš„ github ä»£ç åº“éƒ½åœ¨è¿™é‡Œ:

[](https://github.com/yashprakash13/data-another-day#ml-mini-projects-because-crash-courses-are-the-best) [## yashprakash 13/data-å¦ä¸€å¤©

### æˆ‘åœ¨æˆ‘çš„â€¦ä¸Šå­¦ä¹ å’Œæ’°å†™çš„æ‰€æœ‰æ•°æ®ç§‘å­¦é¡¹ç›®ã€æ¦‚å¿µã€å·¥å…·å’Œèµ„æºçš„ä¸»å­˜å‚¨åº“

github.com](https://github.com/yashprakash13/data-another-day#ml-mini-projects-because-crash-courses-are-the-best) 

åœ¨ [Twitter](https://twitter.com/csandyash) ä¸Šä¸æˆ‘è”ç³»ã€‚