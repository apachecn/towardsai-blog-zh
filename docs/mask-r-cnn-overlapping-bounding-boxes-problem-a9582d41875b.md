# å±è”½ R-CNN é‡å åŒ…å›´ç›’é—®é¢˜

> åŸæ–‡ï¼š<https://pub.towardsai.net/mask-r-cnn-overlapping-bounding-boxes-problem-a9582d41875b?source=collection_archive---------1----------------------->

![](img/ef08b33d8de5f263ba262866a8c6ddaf.png)

[æ¥æº](https://www.researchgate.net/publication/324908056_Deep_Perm-Set_Net_Learn_to_Predict_Sets_with_Unknown_Permutation_and_Cardinality_Using_Deep_Neural_Networks) [1]

Mask R-CNN æ˜¯ä¸€ç§æ¥è‡ªå·ç§¯ç¥ç»ç½‘ç»œçš„äººå·¥ç¥ç»ç½‘ç»œã€‚å®ƒå¯ä»¥æœ‰æ•ˆåœ°æ£€æµ‹å›¾åƒä¸­çš„å¯¹è±¡ï¼Œå¹¶ä¸ºæ¯ä¸ªæ ·æœ¬åˆ›å»ºé«˜è´¨é‡çš„åˆ†å‰²é®ç½©ã€‚

ğŸ”¹æ›´å¿«çš„ R-CNN é€šè¿‡åœ¨å…¶ç½‘ç»œä¸­å¢åŠ ä¸€ä¸ªé¢å¤–çš„åˆ†æ”¯æ¥æ‰©å±•ç°æœ‰çš„ç½‘ç»œã€‚

ğŸ”Šä½ å¯ä»¥é€šè¿‡æ›´å¿«çš„ R-CNN è®¿é—®æˆ‘åœ¨[ä¹‹å‰å‘è¡¨çš„å…³äºä½¿ç”¨å®šåˆ¶æ•°æ®é›†çš„åšæ–‡](/training-faster-r-cnn-using-tensorflow-object-detection-api-with-a-custom-dataset-88dd525666fd)ã€‚

ğŸ”¹ä¸æ›´å¿«çš„ R-CNN ä¸åŒï¼Œå±è”½ R-CNN æ˜¯ä¸ºç½‘ç»œè¾“å…¥å’Œè¾“å‡ºä¹‹é—´çš„é€åƒç´ å¯¹é½ **(RoIAlign)** è€Œè®¾è®¡çš„ã€‚

ğŸ””ä»é›¶å¼€å§‹ä¸€æ­¥ä¸€æ­¥åœ°åˆ›å»ºä¸€ä¸ªæ©æ¨¡ R-CNN é¡¹ç›®ï¼›

ğŸ””é€æ­¥åœ¨è‡ªå®šä¹‰æ•°æ®é›†ä¸Šåˆ›å»ºæ©è†œ R-CNN é¡¹ç›®ï¼›

å¦‚æœä½ å·²ç»æœ‰äº†ä¸€ä¸ª Mask R-CNN é¡¹ç›®ï¼Œæˆ‘æƒ³è°ˆè°ˆæ£€æµ‹è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„è¯¯å·®å’Œé˜ˆå€¼ã€‚æ­£å¦‚æˆ‘åœ¨é¢˜ç›®ä¸­æåˆ°çš„ï¼Œ ***é‡å çš„ç›’å­*** ä¼šé€ æˆåŒºåˆ†ç‰©ä½“çš„é—®é¢˜ã€‚å¦‚æœåªå¯¹ä¸€ä¸ªç±»åˆ«å’ŒèƒŒæ™¯æ‰§è¡Œå¯¹è±¡æ£€æµ‹å’Œåˆ†å‰²ï¼Œ0.9 çš„é˜ˆå€¼æœ€åˆåº”è¯¥è¶³å¤Ÿäº†ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ·±å…¥äº†è§£ä¸€äº›é…ç½®æ–‡ä»¶ã€‚

ä¸Šé¢çš„ä»£ç æ˜¾ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªç¤ºä¾‹é…ç½®ç±»ã€‚å˜é‡***DETECTION _ MIN _ CONFIDENCE***ç´§è·Ÿåœ¨***STEPS _ PER _ EPOCH***å˜é‡ä¹‹åï¼Œæ˜¯æˆ‘ä»¬çš„æ£€æµ‹é˜ˆå€¼å˜é‡ã€‚å¦‚ä»£ç ä¸­æ‰€è¿°ï¼Œå¦‚æœå›¾åƒä¸­çš„å¯¹è±¡ä»¥ 90%æˆ–æ›´é«˜çš„æ¦‚ç‡è¢«æ£€æµ‹åˆ°ï¼Œåˆ™ç»™å‡ºç±»åã€‚è™½ç„¶è¿™ç§æƒ…å†µæœ‰æ—¶æ˜¯å¥½çš„ï¼Œä½†æœ‰æ—¶ä¼šå¯¼è‡´ä¸è‰¯çš„å‡†ç¡®æ€§ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬åº”è¯¥å……åˆ†äº†è§£æ•°æ®ï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„é˜ˆå€¼ã€‚

![](img/4b26c5330201af3fc8e735409691a72e.png)

[æ¥æº](https://d2l.ai/chapter_computer-vision/anchor.html?highlight=threshold)ã€3ã€‘

è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹æˆ‘ä»ã€Šæ·±å…¥å­¦ä¹ ã€‹çš„åŸå§‹æ–‡æ¡£ä¸­è·å–çš„èµ„æ–™ã€‚ä¾‹å¦‚ï¼Œå‡è®¾é€‰æ‹©äº† 90%çš„æ£€æµ‹ç½®ä¿¡åº¦é˜ˆå€¼ã€‚å› æ­¤ï¼Œåœ¨è¯¥å›¾åƒä¸­ï¼Œä»…æ£€æµ‹åˆ°è“è‰²æ¡†ä¸­çš„ç‹—å’Œç´«è‰²æ¡†ä¸­çš„çŒ«ã€‚å› ä¸ºä½äº 90%çš„é˜ˆå€¼å¯¹è±¡ä¸å¹¸å°†ä¸ä¼šè¢«æ£€æµ‹åˆ°ã€‚

![](img/1f48f3a614660933e9bcdd17fe00be11.png)

ç”¨**ç‹—**å’Œ**çŒ«**æ ‡ç­¾[4]åˆ†å‰²çš„ç‰©ä½“

## å±è”½ R-CNN é‡å é”™è¯¯

å¦‚æœæ‚¨åœ¨ Mask R-CNN é¡¹ç›®ä¸­ä½¿ç”¨å¤šä¸ªç±»ï¼Œæ‚¨å¾ˆå¯èƒ½ä¼šå¾—åˆ°ä¸è¿™äº›é˜ˆå€¼ç›¸å…³çš„é”™è¯¯ã€‚æˆ‘åœ¨ä¸‹é¢æ·»åŠ äº†æˆ‘ä¹‹å‰åœ¨æ¨¡ç‰¹è®­ç»ƒä¸­å¾—åˆ°çš„å°ºå¯¸è¯¯å·®ï¼Œä¾›æ‚¨æŸ¥çœ‹ã€‚

1ï¸âƒ£ **é”™è¯¯ 1:**

> **IndexError** :å¸ƒå°”ç´¢å¼•ä¸ç»´åº¦ 0 ä¸Šçš„ç´¢å¼•æ•°ç»„ä¸åŒ¹é…ï¼›

æ ¹æ®æˆ‘å¯¹ Stackoverlow çš„ç ”ç©¶ï¼Œæˆ‘å‘ç°äº†è¿™æ ·ä¸€ä¸ªè§£å†³æ–¹æ³•:

ğŸ‘â€ğŸ—¨While ä¸æ˜¯æ ¸å¿ƒé—®é¢˜çš„ä¿®å¤ï¼Œæ‚¨ä»ç„¶å¯ä»¥é€šè¿‡å°† _idx é‡æ–°åˆ†é…ç»™æ­£ç¡®é•¿åº¦çš„ä¼ å…¥ç±» id å¹¶å°†å®ƒä»¬è½¬æ¢ä¸º numpy å¸ƒå°”ç±»å‹æ¥è¿è¡Œå’Œè®­ç»ƒä»£ç ã€‚

2ï¸âƒ£ **é”™è¯¯ 2:**

å¦ä¸€ä¸ªé”™è¯¯æ˜¯ *AssertionError* ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šé¢ä¸´ç”± **visualize** å‡½æ•°å¼•èµ·çš„é”™è¯¯ã€‚è¯¯å·®çš„æœ€å¤§æ¥æºï¼›
*** *æ²¡æœ‰å®ä¾‹å¯æ˜¾ç¤º*****

ğŸ§µè§£å†³è¿™ç§æƒ…å†µçš„æ–¹æ³•å¾ˆç®€å•ã€‚æ‚¨å¯ä»¥é€šè¿‡å¢åŠ å›¾å½¢å¤§å°æ¥å¯è§†åŒ–é®ç½©ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚

3ï¸âƒ£ **é”™è¯¯ 3:**

å¦‚æœä½ çš„é—®é¢˜ä»ç„¶æ²¡æœ‰è§£å†³ï¼Œæˆ‘å¯ä»¥æ¨èä»¥ä¸‹ 3 ä¸ªè§£å†³æ–¹æ¡ˆã€‚

åœ¨ç¬¬ä¸€æ­¥ä¸­ï¼Œåº”è¯¥é™ä½â˜‘ï¸æ£€æµ‹é˜ˆå€¼ã€‚

â˜‘ï¸ä½¿ç”¨çš„ Scipy åº“ç‰ˆæœ¬åº”è¯¥é™çº§ã€‚

â˜‘ï¸ï¸å¦å¤–ï¼Œmrcnn æ–‡ä»¶å¤¹ä¸­ utils.py æ–‡ä»¶çš„[ç¬¬ 866 è¡Œåº”è¯¥ä¿®æ”¹ã€‚æ‚¨åœ¨ä»£ç çš„ç¬¬ä¸€è¡Œçœ‹åˆ°çš„ shift å˜é‡åº”è¯¥æ›¿æ¢ä¸ºä¸‹é¢çš„è¡Œã€‚](https://github.com/matterport/Mask_RCNN/blob/3deaec5d902d16e1daf56b62d5971d428dc920bc/mrcnn/utils.py#L866)

ğŸ“£è¿™æ ·ï¼Œæ‰€æœ‰çš„é—®é¢˜éƒ½è§£å†³äº†ã€‚ç¥ä½ å¥åº·ç¾å¥½çš„æ—¥å­ã€‚

ğŸ‰æ›´å¤šå†…å®¹å¯ä»¥å…³æ³¨æˆ‘çš„ [GitHub](https://github.com/BuseYaren) ã€ [YouTube](https://www.youtube.com/channel/UCzAODG3wgdKtRov8VvyXvtw) å’Œ [Twitter](https://twitter.com/BuseYarenTekin) ã€‚

## å‚è€ƒ

1.  æ·±åº¦ Perm-Set ç½‘ç»œ:å­¦ä¹ ä½¿ç”¨æ·±åº¦ç¥ç»ç½‘ç»œé¢„æµ‹æœªçŸ¥æ’åˆ—å’ŒåŸºæ•°çš„é›†åˆã€‚
2.  Heï¼Œk .ï¼ŒGkioxariï¼Œg .ï¼ŒDollÃ¡rï¼Œp .ï¼Œ& Girshickï¼ŒR. (2017 å¹´)ã€‚å±è”½ r-cnnã€‚IEEE è®¡ç®—æœºè§†è§‰å›½é™…ä¼šè®®è®ºæ–‡é›†(ç¬¬ 2961-2969 é¡µ)ã€‚
3.  [æ½œå…¥æ·±åº¦å­¦ä¹ ï¼Œé”šç›’ï¼Œhttps://d2l.ai/chapter_computer-vision/anchor.html?é«˜äº®=é˜ˆå€¼](https://d2l.ai/chapter_computer-vision/anchor.html?highlight=threshold)ã€‚
4.  æ·±å…¥å­¦ä¹ ï¼Œè¯­ä¹‰åˆ†å‰²ï¼Œ[https://d2l . ai/chapter _ computer-vision/Semantic-Segmentation-and-dataset . html](https://d2l.ai/chapter_computer-vision/semantic-segmentation-and-dataset.html)